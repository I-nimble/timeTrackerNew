<div class="blank-layout-container justify-content-center">
  <div class="auth-wrapper">
    <div class="register-container position-relative">
    <span class="d-block f-w-500 d-block f-s-14 m-t-24 m-x-16">
        <a
        [routerLink]="['/landingpage']"
        class="text-decoration-none text-primary f-w-500 f-s-14">
        Home</a>
      </span>
      <div class="w-100 position-relative rounded bg-white auth-card m-x-16 m-t-12">
        <div class="auth-body h-100 p-0">
          <div class="row g-0 h-100">
            <div class="col-lg-6 position-relative auth-bg-container">
              <div class="auth-bg-image" [style.background-image]="'url(' + assetPath + ')'"></div>
            </div>
            <div class="col-lg-6 col-12 auth-info">
              <div
                class="d-flex align-items-start align-items-lg-center justify-content-center"
              >
                <div class="d-flex justify-content-center align-items-start form-container m-t-24" style="width: 100%;">
                  <div class="col-lg-11">
                    <h4 class="f-w-700 f-s-30 lh-base m-0 m-t-32">
                      Welcome to Inimble
                    </h4>
                    <span class="f-s-14 d-block mat-body-1 m-t-8"
                    >Your all in one platform to manage your team</span
                    >

                    <div *ngIf="!isRegisterFormVisible && !isImportantInformationVisible">
                      <button mat-stroked-button class="w-100 m-t-45" (click)="showRegisterForm('3')">
                        Client Registration
                      </button>

                      <p class="text-center m-t-16 m-b-16">or</p>
  
                      <button mat-stroked-button class="w-100 m-b-45" (click)="showImportantInformation()">
                        Apply for a Career Opportunity
                      </button>
                    </div>

                    <div *ngIf="!isRegisterFormVisible && isImportantInformationVisible">
                      <h4 class="f-w-700 f-s-26 lh-base m-0 m-t-32">IMPORTANT INFORMATION</h4>
                      <p class="m-t-16 m-b-16">
                        <b>INIMBLE</b> is an outsourcing company specialized in providing talented and skilled professionals in administrative and technological areas. We adapt to the specific needs of each client, offering customized solutions tailored to their requirements. We began operations in the <b>United States (Atlanta, Georgia)</b> several years ago, and we currently have offices in <b>Venezuela (Maracaibo and Valencia)</b> and Colombia <b>(Medellin)</b> üöÄ
                      </p>
                      <p class="m-t-16 m-b-16">
                        Our work approach is <b>100% on-site during the initial stages</b>, which is why we provide the workplace and the necessary electronic equipment to perform tasks, such as laptops, mice, headsets, and more.
                      </p>
                      <p class="m-t-16 m-b-16">
                        The position we are offering, in general terms, is that of a Virtual Assistant, and the required competencies for this role include:
                      </p>
                      <ul>
                        <li>Proficiency in the English language</li>
                        <li>Problem-solving skills</li>
                        <li>Proactive attitude</li>
                        <li>Familiarity with technological tools</li>
                        <li>High adaptability and versatility</li>
                        <li>Ability to work as part of a team</li>
                      </ul>
                      <p class="m-t-16 m-b-16">
                        We currently operate exclusively in the <b>U.S. Pacific Time Zone</b>, which means the working hours are approximately <b>11:30 a.m. or 12:00 p.m. to 8:00 p.m., Monday through Friday.</b>
                      </p>
                      <p class="m-t-16 m-b-16">
                        üìù Once you complete and submit the application form, you will need to wait for our Human Resources team to review your submission. <b>Please note that the time it takes for HR to review applications may vary depending on the number of applicants we are processing at the moment.</b> If you meet all the requirements, you will be contacted via WhatsApp to continue the process. If not, it means you were not pre-selected for the next stage.
                      </p>
                      <p class="m-t-16 m-b-16">
                        üí∞ Payments are made <b>biweekly via Binance.</b>
                      </p>
                      <p class="m-t-16 m-b-16">
                        üü¢ <b>Benefits will be discussed directly once</b> the candidate has been selected to join Inimble.
                      </p>
                      <p class="m-t-16 m-b-16">
                        <b>Inimble Work Smart</b> üíö
                      </p>
                      <button mat-flat-button color="primary" class="w-100" (click)="showRegisterForm('2')">
                        Start
                      </button>
                    </div>

                    <div *ngIf="isRegisterFormVisible">
                      <!-- Sign up with Google -->
                      <div class="row m-t-24">
                        <div class="col-12 col-sm-12">
                          <!-- <button mat-stroked-button class="w-100 m-b-4" (click)="googleSignUp()">
                            <div class="d-flex align-items-center">
                              <img
                                src="/assets/images/svgs/google-icon.svg"
                                alt="google"
                                width="16"
                                class="m-r-8"
                              />
                              Sign up with Google
                            </div>
                          </button> -->
                        </div>
                      </div>
  
                      <!-- <div class="or-border m-t-30">or sign up as a {{userRole === '3' ? 'client' : 'team member'}} with</div> -->
                      
                      <!-- Client registration form -->
                      <mat-stepper #stepper id="register-form" *ngIf="userRole === '3'">
                        <mat-step [stepControl]="registerClientForm">
                          <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                            <form [formGroup]="registerClientForm">
                              <h2 class="text-center m-b-24 label-title">What is your email address?</h2>
                              <mat-form-field appearance="outline" class="w-100">
                                <input matInput formControlName="email" required type="email" placeholder="email@example.com" />
                                <mat-error 
                                  class="text-danger f-s-12 m-t-0"
                                  *ngIf="(registerClientForm.get('email')?.hasError('email') || registerClientForm.get('email')?.hasError('pattern')) && registerClientForm.get('email')?.touched"
                                >
                                  Please enter a valid email address
                                </mat-error>
                                <mat-error 
                                  class="text-danger f-s-12 m-t-0"
                                  *ngIf="(registerClientForm.get('email')?.hasError('emailTaken')) && registerClientForm.get('email')?.touched"
                                  >
                                  Email is already taken
                                </mat-error>
                                <mat-error
                                  class="text-danger f-s-12 m-t-0"
                                  *ngIf="registerClientForm.get('email')?.hasError('required') && registerClientForm.get('email')?.touched">
                                  Email is required
                                </mat-error>
                              </mat-form-field>
      
                              <button class="w-100" mat-flat-button matStepperNext [disabled]="!registerClientForm.get('email')?.valid">Next</button>
                            </form>
                          </div>
                        </mat-step>
                        <mat-step [stepControl]="registerClientForm">
                          <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                            <form [formGroup]="registerClientForm">
                              <h2 class="text-center m-b-24 label-title">Enter your full name</h2>
                              <mat-form-field appearance="outline" class="w-100">
                                <input matInput formControlName="name" required type="text" placeholder="First name" />
                                <mat-error class="text-danger f-s-12 m-t-0"
                                  *ngIf="registerClientForm.get('name')?.hasError('required') && registerClientForm.get('name')?.touched">
                                  First name is required
                                </mat-error>
                              </mat-form-field>
                              <mat-form-field appearance="outline" class="w-100">
                                <input matInput formControlName="last_name" required type="text" placeholder="Last name" />
                                <mat-error class="text-danger f-s-12 m-t-0"
                                  *ngIf="registerClientForm.get('last_name')?.hasError('required') && registerClientForm.get('last_name')?.touched">
                                  Last name is required
                                </mat-error>
                              </mat-form-field>
      
                              <button class="w-100" mat-flat-button matStepperNext [disabled]="!registerClientForm.get('name')?.valid || !registerClientForm.get('last_name')?.valid">Next</button>
                            </form>
                          </div>
                        </mat-step>
                        <mat-step [stepControl]="registerClientForm">
                          <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                            <form class="m-t-24" [formGroup]="registerClientForm">
                              <h2 class="text-center m-b-24 label-title">Enter your company name</h2>
                              <mat-form-field appearance="outline" class="w-100">
                                <input matInput formControlName="company_name" required type="text" placeholder="Company name" />
                                <mat-error class="text-danger f-s-12 m-t-0"
                                  *ngIf="registerClientForm.get('company_name')?.hasError('required') && registerClientForm.get('company_name')?.touched">
                                  Company name is required
                                </mat-error>
                                <mat-error class="text-danger f-s-12 m-t-0"
                                  *ngIf="registerClientForm.get('company_name')?.hasError('companyExists') && registerClientForm.get('company_name')?.touched">
                                  Company already exists
                                </mat-error>
                              </mat-form-field>
      
                              <button class="w-100" mat-flat-button matStepperNext [disabled]="!registerClientForm.get('company_name')?.valid">Next</button>
                            </form>
                          </div>
                        </mat-step>
                        <mat-step [stepControl]="registerClientForm">
                          <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                            <form class="m-t-24" [formGroup]="registerClientForm">
                              <h2 class="text-center m-b-10 label-title">Departments</h2>
                              <p class="text-center m-b-24 label-subtitle">(This field is optional)</p>
                              <div class="d-flex flex-wrap gap-8 justify-content-center m-b-16">
                                <button
                                  mat-stroked-button
                                  [ngClass]="selectedDepartments.includes(dept) ? 'primary' : 'disabled'"
                                  *ngFor="let dept of departmentsOptions"
                                  (click)="toggleDepartment(dept); $event.preventDefault()"
                                >
                                  {{ dept?.name }}
                                </button>
                              </div>
                              <mat-form-field *ngIf="hasOtherDepartment()"
                                appearance="outline" class="w-100">
                                <mat-label>Other Department</mat-label>
                                <input matInput formControlName="otherDepartment" type="text" />
                                <mat-error class="text-danger f-s-12 m-t-0"
                                  *ngIf="registerClientForm.get('otherDepartment')?.hasError('required')">
                                  Please specify the other department
                                </mat-error>
                              </mat-form-field>
                              <button class="w-100" mat-flat-button matStepperNext>
                                Next
                              </button>
                            </form>
                          </div>
                        </mat-step>
                        <mat-step [stepControl]="registerClientForm">
                          <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                            <form class="m-t-24 col-12" [formGroup]="registerClientForm">
                              <h2 class="text-center m-b-10 label-title">Enter your phone number</h2>
                              <p class="text-center m-b-24 label-subtitle">(This field is optional)</p>
      
                              <div class="d-flex flex-row">
                                <mat-form-field appearance="outline" style="width: 100px;" class="m-r-16">
                                  <mat-select formControlName="countryCode">
                                    <mat-option value="+1">+1 (US)</mat-option>
                                  </mat-select>
                                </mat-form-field>
                                <mat-form-field appearance="outline" style="flex-grow: 1;">
                                  <input matInput formControlName="phone" type="phone" placeholder="Phone number" />
                                  <mat-error class="text-danger f-s-12 m-t-0"
                                    *ngIf="registerClientForm.get('phone')?.hasError('pattern') && registerClientForm.get('phone')?.touched">
                                    Enter a valid phone number
                                  </mat-error>
                                </mat-form-field>
                              </div>
      
                              <button class="w-100" mat-flat-button matStepperNext [disabled]="!registerClientForm.get('phone')?.valid">Next</button>
                            </form>
                          </div>
                        </mat-step>
                        <mat-step [stepControl]="registerClientForm">
                            <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                              <form class="m-t-24" [formGroup]="registerClientForm">
                                <h2 class="text-center m-b-24 label-title">Enter your password</h2>
                                <mat-form-field appearance="outline" class="w-100">
                                  <input matInput formControlName="password" required type="password" placeholder="Password" />
                                  <mat-error class="text-danger f-s-12 m-t-0"
                                    *ngIf="registerClientForm.get('password')?.hasError('required') && registerClientForm.get('password')?.touched">
                                    Password is required
                                  </mat-error>
                                  <mat-error class="text-danger f-s-12 m-t-0"
                                    *ngIf="registerClientForm.get('password')?.hasError('minlength') && registerClientForm.get('password')?.touched">
                                    Password must be at least 8 characters
                                  </mat-error>
                                </mat-form-field>
  
                                <button class="w-100" mat-flat-button (click)="submit()" [disabled]="!registerClientForm.valid">Finish</button>
                              </form>
                            </div>
                        </mat-step>
                      </mat-stepper>
  
                      <!-- Invited Team Member registration form -->
                      <mat-stepper #stepper id="register-form" *ngIf="userRole === '2' && hasInvitation">
                        <mat-step [stepControl]="registerInvitedTeamMemberForm">
                          <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                            <form [formGroup]="registerInvitedTeamMemberForm">
                              <h2 class="text-center m-b-24 label-title">What is your email address?</h2>
                              <mat-form-field appearance="outline" class="w-100">
                                <input matInput formControlName="email" required type="email" placeholder="email@example.com" />
                                <mat-error
                                  class="text-danger f-s-12 m-t-0"
                                  *ngIf="registerInvitedTeamMemberForm.get('email')?.hasError('required') && registerInvitedTeamMemberForm.get('email')?.touched">
                                  Email is required
                                </mat-error>
                                <mat-error 
                                  class="text-danger f-s-12 m-t-0"
                                  *ngIf="(registerInvitedTeamMemberForm.get('email')?.hasError('email') || registerInvitedTeamMemberForm.get('email')?.hasError('pattern')) && registerInvitedTeamMemberForm.get('email')?.touched"
                                >
                                  Please enter a valid email address
                                </mat-error>
                                <mat-error 
                                  class="text-danger f-s-12 m-t-0"
                                  *ngIf="(registerInvitedTeamMemberForm.get('email')?.hasError('emailTaken')) && registerInvitedTeamMemberForm.get('email')?.touched"
                                  >
                                  Email is already taken
                                </mat-error>
                              </mat-form-field>
  
                              <button class="w-100" mat-flat-button matStepperNext [disabled]="!registerInvitedTeamMemberForm.get('email')?.valid">Next</button>
                            </form>
                          </div>
                        </mat-step>
                        <mat-step [stepControl]="registerInvitedTeamMemberForm">
                          <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                            <form [formGroup]="registerInvitedTeamMemberForm">
                              <h2 class="text-center m-b-24 label-title">Enter your full name</h2>
                              <mat-form-field appearance="outline" class="w-100">
                                <input matInput formControlName="name" required type="text" placeholder="First name" />
                                <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerInvitedTeamMemberForm.get('name')?.hasError('required') && registerInvitedTeamMemberForm.get('name')?.touched">
                                First name is required
                                </mat-error>
                              </mat-form-field>
                              <mat-form-field appearance="outline" class="w-100">
                                <input matInput formControlName="last_name" required type="text" placeholder="Last name" />
                                <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerInvitedTeamMemberForm.get('last_name')?.hasError('required') && registerInvitedTeamMemberForm.get('last_name')?.touched">
                                Last name is required
                                </mat-error>
                              </mat-form-field>
      
                              <button class="w-100" mat-flat-button matStepperNext [disabled]="!registerInvitedTeamMemberForm.get('name')?.valid || !registerInvitedTeamMemberForm.get('last_name')?.valid">Next</button>
                            </form>
                          </div>
                        </mat-step>
                        <mat-step [stepControl]="registerInvitedTeamMemberForm">
                          <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                            <form class="m-t-24" [formGroup]="registerInvitedTeamMemberForm">
                              <h2 class="text-center m-b-24 label-title">Company</h2>
                              <mat-form-field appearance="outline" class="w-100">
                                <input matInput [value]="getCompanyName" required type="text" readonly />
                                <mat-error class="text-danger f-s-12 m-t-0"
                                  *ngIf="registerInvitedTeamMemberForm.get('company')?.hasError('required') && registerInvitedTeamMemberForm.get('company')?.touched">
                                  Company is required
                                </mat-error>
                              </mat-form-field>
  
                              <button class="w-100" mat-flat-button matStepperNext [disabled]="!registerInvitedTeamMemberForm.get('company')?.valid">Next</button>
                            </form>
                          </div>
                        </mat-step>
  
                        <mat-step [stepControl]="registerInvitedTeamMemberForm">
                          <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                            <form class="m-t-24" [formGroup]="registerInvitedTeamMemberForm">
                              <h2 class="text-center m-b-24 label-title">Select your position</h2>
                              <mat-form-field appearance="outline" class="w-100">
                                <mat-select formControlName="position" required>
                                  <mat-option *ngFor="let position of positions" [value]="position.id">
                                    {{ position.title }}
                                  </mat-option>
                                </mat-select>
                                <mat-error class="text-danger f-s-12 m-t-0"
                                  *ngIf="registerInvitedTeamMemberForm.get('position')?.hasError('required') && registerInvitedTeamMemberForm.get('position')?.touched">
                                  Position is required
                                </mat-error>
                              </mat-form-field>
  
                              <button class="w-100" mat-flat-button matStepperNext [disabled]="!registerInvitedTeamMemberForm.get('position')?.valid">Next</button>
                            </form>
                          </div>
                        </mat-step>
                        
                        <mat-step [stepControl]="registerInvitedTeamMemberForm">
                            <div class="d-flex justify-content-center align-items-start form-container m-t-24">
                              <form class="m-t-24" [formGroup]="registerInvitedTeamMemberForm">
                                <h2 class="text-center m-b-24 label-title">Enter your password</h2>
                                <mat-form-field appearance="outline" class="w-100">
                                  <input matInput formControlName="password" required type="password" />
                                  <mat-error class="text-danger f-s-12 m-t-0"
                                    *ngIf="registerInvitedTeamMemberForm.get('password')?.hasError('required') && registerInvitedTeamMemberForm.get('password')?.touched">
                                    Password is required
                                  </mat-error>
                                  <mat-error class="text-danger f-s-12 m-t-0"
                                    *ngIf="registerInvitedTeamMemberForm.get('password')?.hasError('minlength') && registerInvitedTeamMemberForm.get('password')?.touched">
                                    Password must be at least 8 characters
                                  </mat-error>
                                </mat-form-field>
  
                                <button class="w-100" mat-flat-button (click)="submit()" [disabled]="!registerInvitedTeamMemberForm.valid">Finish</button>
                              </form>
                            </div>
                        </mat-step>
                      </mat-stepper>

                      <!-- Team Member registration form without invitation -->
                      <mat-stepper #stepper id="register-form" *ngIf="userRole === '2' && !hasInvitation">
                        <!-- Step 1: Location and Role Selection -->
                        <mat-step [stepControl]="registerTeamMemberForm">
                          <form [formGroup]="registerTeamMemberForm">
                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Location</mat-label>
                              <mat-select formControlName="location" required>
                                <mat-option *ngFor="let loc of locations" [value]="loc.city">{{loc.city}}</mat-option>
                              </mat-select>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('location')?.hasError('required') && registerTeamMemberForm.get('location')?.touched">
                                Location is required
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Role</mat-label>
                              <mat-select formControlName="role" required>
                                <mat-option *ngFor="let role of careerRoles" [value]="role">{{role.title}}</mat-option>
                              </mat-select>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('role')?.hasError('required') && registerTeamMemberForm.get('role')?.touched">
                                Role is required
                              </mat-error>
                            </mat-form-field>

                            <button mat-flat-button color="primary" class="w-100" matStepperNext 
                                    [disabled]="!registerTeamMemberForm.get('location')?.valid || !registerTeamMemberForm.get('role')?.valid ||
                                    (registerTeamMemberForm.get('location')?.value === 'Medellin' && registerTeamMemberForm.get('role')?.value === 'IT and Technology')">
                              Next
                            </button>
                          </form>
                        </mat-step>

                        <!-- Step 2: Personal Information -->
                        <mat-step [stepControl]="registerTeamMemberForm">
                          <form [formGroup]="registerTeamMemberForm">
                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Email</mat-label>
                              <input matInput formControlName="email" type="email" required>
                              <mat-error
                                class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('email')?.hasError('required') && registerTeamMemberForm.get('email')?.touched">
                                Email is required
                              </mat-error>
                              <mat-error 
                                class="text-danger f-s-12 m-t-0"
                                *ngIf="(registerTeamMemberForm.get('email')?.hasError('email') || registerTeamMemberForm.get('email')?.hasError('pattern')) && registerTeamMemberForm.get('email')?.touched"
                              >
                                Please enter a valid email address
                              </mat-error>
                              <mat-error 
                                class="text-danger f-s-12 m-t-0"
                                *ngIf="(registerTeamMemberForm.get('email')?.hasError('emailTaken')) && registerTeamMemberForm.get('email')?.touched"
                                >
                                Email is already taken
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Password</mat-label>
                              <input matInput formControlName="password" type="password" required>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('password')?.hasError('required') && registerTeamMemberForm.get('password')?.touched">
                                Password is required
                              </mat-error>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('password')?.hasError('minlength') && registerTeamMemberForm.get('password')?.touched">
                                Password must be at least 8 characters
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Full Name</mat-label>
                              <input matInput formControlName="fullName" required>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('fullName')?.hasError('required') && registerTeamMemberForm.get('fullName')?.touched">
                                Full name is required
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Age</mat-label>
                              <input matInput formControlName="age" type="number" min="18" required>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('age')?.hasError('required') && registerTeamMemberForm.get('age')?.touched">
                                Age is required
                              </mat-error>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('age')?.hasError('min') && registerTeamMemberForm.get('age')?.touched">
                                Minimum age is 18
                              </mat-error>
                            </mat-form-field>

                            <button mat-flat-button color="primary" class="w-100" matStepperNext 
                                    [disabled]="!registerTeamMemberForm.get('email')?.valid || 
                                    !registerTeamMemberForm.get('password')?.valid || 
                                    !registerTeamMemberForm.get('fullName')?.valid || 
                                    !registerTeamMemberForm.get('age')?.valid">
                              Next
                            </button>
                          </form>
                        </mat-step>

                        <!-- Referer Information -->
                        <mat-step [stepControl]="registerTeamMemberForm">
                          <form [formGroup]="registerTeamMemberForm">
                            <mat-form-field appearance="outline" class="w-100 m-b-16">
                              <mat-label>Where did you apply?</mat-label>
                              <input matInput formControlName="appliedWhere" required>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('appliedWhere')?.hasError('required') && registerTeamMemberForm.get('appliedWhere')?.touched">
                                This field is required
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Are you referred by someone?</mat-label>
                              <mat-select formControlName="referred" required>
                                <mat-option value="no">No</mat-option>
                                <mat-option value="yes">Yes</mat-option>
                              </mat-select>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('referred')?.hasError('required') && registerTeamMemberForm.get('referred')?.touched">
                                This field is required
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100" *ngIf="registerTeamMemberForm.get('referred')?.value === 'yes'">
                              <mat-label>Who referred you?</mat-label>
                              <input matInput formControlName="referredName" required>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('referredName')?.hasError('required') && registerTeamMemberForm.get('referredName')?.touched">
                                Referrer's name is required
                              </mat-error>
                            </mat-form-field>

                            <button mat-flat-button color="primary" class="w-100" matStepperNext 
                                    [disabled]="!registerTeamMemberForm.get('appliedWhere')?.valid
                                    || !registerTeamMemberForm.get('referred')?.valid
                                    || (registerTeamMemberForm.get('referred')?.value === 'yes' && !registerTeamMemberForm.get('referredName')?.valid)">
                              Next
                            </button>
                          </form>
                        </mat-step>

                        <!-- Step 3: Contact Details -->
                        <mat-step [stepControl]="registerTeamMemberForm">
                          <form [formGroup]="registerTeamMemberForm">
                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Contact Phone</mat-label>
                              <input matInput formControlName="contactPhone" required>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('contactPhone')?.hasError('required') && registerTeamMemberForm.get('contactPhone')?.touched">
                                Contact phone is required
                              </mat-error>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('contactPhone')?.hasError('pattern') && registerTeamMemberForm.get('contactPhone')?.touched">
                                Please enter a valid phone number
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Additional Phone</mat-label>
                              <input matInput formControlName="additionalPhone">
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('additionalPhone')?.hasError('pattern') && registerTeamMemberForm.get('additionalPhone')?.touched">
                                Please enter a valid phone number
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Current Residence</mat-label>
                              <input matInput formControlName="currentResidence" required>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('currentResidence')?.hasError('required') && registerTeamMemberForm.get('currentResidence')?.touched">
                                Current residence is required
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Address (with reference)</mat-label>
                              <textarea matInput formControlName="address" required></textarea>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('address')?.hasError('required') && registerTeamMemberForm.get('address')?.touched">
                                Address is required
                              </mat-error>
                            </mat-form-field>

                            <button mat-flat-button color="primary" class="w-100" matStepperNext 
                                    [disabled]="!registerTeamMemberForm.get('contactPhone')?.valid || !registerTeamMemberForm.get('currentResidence')?.valid || !registerTeamMemberForm.get('address')?.valid">  
                              Next
                            </button>
                          </form>
                        </mat-step>

                        <!-- Step 4: Family & Language -->
                        <mat-step [stepControl]="registerTeamMemberForm">
                          <form [formGroup]="registerTeamMemberForm">
                            <mat-form-field appearance="outline" class="w-100 m-b-16">
                              <mat-label>English Level</mat-label>
                              <mat-select formControlName="englishLevel" required>
                                <mat-option *ngFor="let level of englishLevels" [value]="level">{{level}}</mat-option>
                              </mat-select>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('englishLevel')?.hasError('required') && registerTeamMemberForm.get('englishLevel')?.touched">
                                English level is required
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Do you have children? How many?</mat-label>
                              <input matInput formControlName="children" type="number" min="0">
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('children')?.hasError('required') && registerTeamMemberForm.get('children')?.touched">
                                This field is required
                              </mat-error>
                            </mat-form-field>

                            <!-- Conditional Availability Field -->
                            <ng-container *ngIf="registerTeamMemberForm.contains('availability')">
                              <div *ngIf="(registerTeamMemberForm.get('role')?.value === 'Virtual Assistant') || (registerTeamMemberForm.get('role')?.value?.title === 'Virtual Assistant')">
                                <p>Are you available to work Pacific Time hours (11:30am-8:00pm, Mon-Fri)?</p>
                                <mat-radio-group formControlName="availability" required>
                                  <mat-radio-button value="yes">Yes</mat-radio-button>
                                  <mat-radio-button value="no">No</mat-radio-button>
                                </mat-radio-group>
                                <mat-error class="text-danger f-s-12 m-t-0" *ngIf="registerTeamMemberForm.get('availability')?.hasError('mustBeYes')">
                                  You must be available to work Pacific Time hours to apply.
                                </mat-error>
                              </div>

                              <div *ngIf="(registerTeamMemberForm.get('role')?.value === 'IT and Technology') || (registerTeamMemberForm.get('role')?.value?.title === 'IT and Technology')">
                                <mat-form-field appearance="outline" class="w-100">
                                  <mat-label>Availability Details</mat-label>
                                  <textarea matInput formControlName="availability" required></textarea>
                                </mat-form-field>
                                <mat-error class="text-danger f-s-12 m-t-0" *ngIf="registerTeamMemberForm.get('availability')?.hasError('mustBeYes')">
                                  You must confirm your availability to apply.
                                </mat-error>
                              </div>
                            </ng-container>

                            <button mat-flat-button color="primary" class="w-100" matStepperNext 
                                    [disabled]="!registerTeamMemberForm.get('englishLevel')?.valid || (registerTeamMemberForm.contains('availability') && !registerTeamMemberForm.get('availability')?.valid)">
                              Next
                            </button>
                          </form>
                        </mat-step>

                        <!-- Step 5: Salary & Skills -->
                        <mat-step [stepControl]="registerTeamMemberForm">
                          <form [formGroup]="registerTeamMemberForm">
                            <!-- Dynamic Salary Question -->
                            <div *ngIf="registerTeamMemberForm.contains('salaryRange')">
                              <p class="fs-12 f-w-600">Are you willing to accept a monthly salary range between {{getSalaryRangeText()}}?</p>
                              <mat-radio-group formControlName="salaryRange" required>
                                <mat-radio-button value="yes">Yes</mat-radio-button>
                                <mat-radio-button value="no">No</mat-radio-button>
                              </mat-radio-group>
                              <mat-error class="text-danger f-s-12 m-t-0" *ngIf="registerTeamMemberForm.get('salaryRange')?.hasError('mustBeYes')">
                                You must accept the salary range to apply.
                              </mat-error>
                            </div>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Competencies (Teamwork, Adaptability, etc.)</mat-label>
                              <textarea matInput formControlName="competencies" required></textarea>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('competencies')?.hasError('required') && registerTeamMemberForm.get('competencies')?.touched">
                                Competencies are required
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Technical Skills</mat-label>
                              <textarea matInput formControlName="technicalSkills" required></textarea>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('technicalSkills')?.hasError('required') && registerTeamMemberForm.get('technicalSkills')?.touched">
                                Technical skills are required
                              </mat-error>
                            </mat-form-field>

                            <!-- Programming Languages (IT only) -->
                            <div *ngIf="registerTeamMemberForm.contains('programmingLanguages')">
                              <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Programming Languages & Experience</mat-label>
                                <textarea matInput formControlName="programmingLanguages" required></textarea>
                              </mat-form-field>
                            </div>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Technology Proficiency (1-10)</mat-label>
                              <input matInput formControlName="techProficiency" type="number" min="1" max="10" required>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('techProficiency')?.hasError('required') && registerTeamMemberForm.get('techProficiency')?.touched">
                                Tech proficiency is required
                              </mat-error>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('techProficiency')?.hasError('min') && registerTeamMemberForm.get('techProficiency')?.touched">
                                Minimum value is 1
                              </mat-error>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('techProficiency')?.hasError('max') && registerTeamMemberForm.get('techProficiency')?.touched">
                                Maximum value is 10
                              </mat-error>
                            </mat-form-field>

                            <button mat-flat-button color="primary" class="w-100" matStepperNext 
                                    [disabled]="!registerTeamMemberForm.get('competencies')?.valid || !registerTeamMemberForm.get('technicalSkills')?.valid || 
                                    !registerTeamMemberForm.get('techProficiency')?.valid || (registerTeamMemberForm.contains('salaryRange') && !registerTeamMemberForm.get('salaryRange')?.valid)">
                              Next
                            </button>
                          </form>
                        </mat-step>

                        <!-- Step 6: Education & Experience -->
                        <mat-step [stepControl]="registerTeamMemberForm">
                          <form [formGroup]="registerTeamMemberForm">
                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Education History</mat-label>
                              <textarea matInput formControlName="educationHistory" required></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Work Experience</mat-label>
                              <textarea matInput formControlName="workExperience" required></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Work References</mat-label>
                              <textarea matInput formControlName="workReferences" required></textarea>
                              <mat-error class="text-danger f-s-12 m-t-0"
                                *ngIf="registerTeamMemberForm.get('workReferences')?.hasError('required') && registerTeamMemberForm.get('workReferences')?.touched">
                                Work references are required
                              </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="w-100">
                              <mat-label>Hobbies</mat-label>
                              <textarea matInput formControlName="hobbies" required></textarea>
                            </mat-form-field>

                            <button mat-flat-button color="primary" class="w-100" matStepperNext 
                                    [disabled]="!registerTeamMemberForm.get('workReferences')?.valid ||
                                                !registerTeamMemberForm.get('workExperience')?.valid ||
                                                !registerTeamMemberForm.get('educationHistory')?.valid ||
                                                !registerTeamMemberForm.get('hobbies')?.valid">
                              Next
                            </button>
                          </form>
                        </mat-step>

                        <!-- Step 7: Media Uploads -->
                        <mat-step [stepControl]="registerTeamMemberForm">
                          <form [formGroup]="registerTeamMemberForm">
                            <p>Please attach your resume, including months and years for each job. <b>(Example: Virtual Assistant at Inimble Venezuela - 1 year and 4 months)</b></p>
                            <button mat-flat-button color="primary" class="m-t-8 file">
                              <i-tabler name="upload" class="icon-20"></i-tabler>
                              Upload resume
                              <input
                                #fileInput
                                type="file"
                                name="resume"
                                (change)="onFileChange($event, 'resume')"
                                accept=".pdf,.doc,.docx"
                                style="
                                  position: absolute;
                                  display: block;
                                  width: 100%;
                                  opacity: 0;
                                  top: 0;
                                  left: 0;
                                  cursor: pointer!important;"
                              />
                            </button>

                            <mat-error *ngIf="registerTeamMemberForm.get('resume')?.hasError('required')">
                              Resume is required
                            </mat-error>
                            <mat-error *ngIf="registerTeamMemberForm.get('resume')?.hasError('maxFileSize')">
                              File too large (max 10GB)
                            </mat-error>

                            <!-- Portfolio (VA only) -->
                            <div *ngIf="registerTeamMemberForm.contains('portfolio')">
                              <p>Portfolio (Graphic Design)</p>

                              <button mat-flat-button color="primary" class="m-t-8 file">
                                <i-tabler name="upload" class="icon-20"></i-tabler>
                                Upload portfolio
                                <input
                                  #fileInput
                                  type="file"
                                  name="portfolio"
                                  (change)="onFileChange($event, 'portfolio')"
                                  accept=".pdf,.doc,.docx"
                                  style="
                                    position: absolute;
                                    display: block;
                                    width: 100%;
                                    opacity: 0;
                                    top: 0;
                                    left: 0;
                                    cursor: pointer!important;"
                                />
                              </button>

                              <mat-error *ngIf="registerTeamMemberForm.get('portfolio')?.hasError('required')">
                                Portfolio is required
                              </mat-error>
                              <mat-error *ngIf="registerTeamMemberForm.get('portfolio')?.hasError('maxFileSize')">
                                File too large (max 10GB)
                              </mat-error>
                            </div>

                            <button mat-flat-button color="primary" class="w-100 m-t-16" (click)="submit()" 
                                    [disabled]="!registerTeamMemberForm.valid">
                              Submit Application
                            </button>
                          </form>
                        </mat-step>
                      </mat-stepper>
                    </div>

                    <span class="d-block f-w-500 d-block m-t-24 m-b-32"
                      >Already have an Account?

                      <a
                        [routerLink]="['/authentication/login']"
                        class="text-decoration-none text-primary f-w-500 f-s-14"
                      >
                        Sign In</a
                      >
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>
  </div>
</div>
