<mat-card class="cardWithShadow">

    <mat-tab-group mat-stretch-tabs="false" animationDuration="0ms">
    <mat-tab>
        <ng-template mat-tab-label>
          <div class="d-flex align-items-center">
            <mat-icon class="d-flex align-items-center">
              <i-tabler name="user-circle" class="icon-20 m-r-8 d-flex"></i-tabler>
            </mat-icon>
          </div>
          Account
        </ng-template>
        <mat-card-content class="p-y-24">
          <div class="row">
            <div class="col-sm-6" *ngIf="role === '3'">
              <mat-card class="cardWithShadow">
                <mat-card-content class="p-y-24">
                  <mat-card-title
                    >Current Plan: <span class="text-success">{{ currentPlan?.name }}</span>
                  </mat-card-title>
                  <mat-card-subtitle class="f-s-14" *ngIf="currentPlan?.id !== 1"
                    >Thanks for being a premium member and supporting Inimble.</mat-card-subtitle>

                  <div class="m-t-24">
                    <button mat-flat-button color="primary" *ngIf="currentPlan?.id === 1">
                      <span>
                        Go Premium
                      </span>
                      <i-tabler name="diamond" class="icon-20 f-w-600 f-s-5 m-l-8"></i-tabler>
                    </button>
                    <button mat-stroked-button class="m-l-8" color="warn" *ngIf="currentPlan?.id !== 1">
                      Reset Plan
                    </button>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
            <div class="col-sm-6" *ngIf="role === '3'">
              <mat-card class="cardWithShadow">
                <mat-card-content class="p-y-24">
                  <mat-card-title>Change Password</mat-card-title>
                  <mat-card-subtitle class="f-s-14"
                    >To change your password please confirm
                    here</mat-card-subtitle
                  >
                    <form class="m-t-24" [formGroup]="profileForm">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Current Password</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="password" placeholder="Current password" formControlName="old_password" />
                    </mat-form-field>
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >New Password</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="password" placeholder="New password" formControlName="new_password" />
                    </mat-form-field>
                    <!-- input -->
                    <!-- <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Confirm Password</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 hide-hint"
                      color="primary"
                    >
                      <input matInput type="password" value="password" />
                    </mat-form-field> -->
                  </form>
                </mat-card-content>
              </mat-card>
            </div>
            <div class="col-sm-4">
              <mat-card class="cardWithShadow">
                <mat-card-content class="p-y-24">
                  <mat-card-title>Change Profile</mat-card-title>
                  <mat-card-subtitle class="f-s-14"
                    >Change your profile picture from here</mat-card-subtitle
                  >
                  <div class="text-center m-t-24 logo-upload">
                    <img
                          [src]="picture"
                          class="rounded-circle"
                          width="120"
                          height="120"
                          style="object-fit: cover; aspect-ratio: 1 / 1;"
                    />
                    <div class="m-t-24">
                      <button mat-flat-button color="primary" class="m-r-8 file">
                        Upload
                        <input
                          type="file"
                          name="logo"
                          (change)="onFileSelected($event)"
                          accept="image/jpeg, image/jpg, image/png"
                          style="
                            position: absolute;
                            display: block;
                            width: 100%;
                            opacity: 0;
                            top: 0;
                            left: 0;
                            cursor: pointer;"
                        />
                      </button>
                      <button mat-stroked-button color="warn" (click)="deleteImage()">Reset</button>
                    </div>
                    <span class="f-s-14 m-t-24 d-block"
                      >Allowed JPG, PNG. Max size of 1MB</span
                    >
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
            <div [class]="role === '3' ? 'col-sm-8' : 'col-sm-8'">
              <mat-card class="cardWithShadow">
                <mat-card-content>
                  <mat-card-title>Personal Details</mat-card-title>
                  <mat-card-subtitle class="f-s-14"
                    >To change your personal details, edit and save from here
                  </mat-card-subtitle>

                <form [formGroup]="personalForm" class="row m-t-24" *ngIf="role !== '3'">
                  <div class="col-12 col-sm-6">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Name</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="text" formControlName="name" />
                    </mat-form-field>
                  </div>
                  <div class="col-12 col-sm-6">
                        <!-- input -->
                        <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                        >Last name</mat-label
                      >
                      <mat-form-field
                        appearance="outline"
                        class="w-100"
                        color="primary"
                      >
                        <input matInput type="text" formControlName="last_name" />
                      </mat-form-field>
                  </div>
                  <div class="col-12">
                       <!-- input -->
                       <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                       >Email</mat-label
                     >
                     <mat-form-field
                       appearance="outline"
                       class="w-100"
                       color="primary"
                     >
                       <input
                         matInput
                         type="email"
                         formControlName="email"
                         readonly
                       />
                     </mat-form-field>
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Phone</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="text" placeholder="+1 (123) 456-7890" formControlName="phone" />
                    </mat-form-field>
                    <div *ngIf="personalForm.get('phone')?.touched && personalForm.get('phone')?.errors">
                      <p class="text-danger f-s-12 m-t-0" *ngIf="personalForm.get('phone')?.errors?.['pattern']">Please enter a valid phone number (e.g., +1 (123) 456-7890)</p> 
                    </div>
                  </div>
                  <div class="col-12">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Address</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="text"
                        placeholder="Address"
                        formControlName="address"
                      />
                    </mat-form-field>
                  </div>
                </form>

                <form class="row m-t-24" [formGroup]="profileForm" *ngIf="role === '3'">
                    <div class="col-12 col-sm-6">
                      <!-- input -->
                      <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                        >Name</mat-label
                      >
                      <mat-form-field
                        appearance="outline"
                        class="w-100"
                        color="primary"
                      >
                        <input matInput type="text" formControlName="name" placeholder="First name" />
                      </mat-form-field>
                    </div>
                    <div class="col-12 col-sm-6">
                          <!-- input -->
                          <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                          >Last name</mat-label
                        >
                        <mat-form-field
                          appearance="outline"
                          class="w-100"
                          color="primary"
                        >
                          <input matInput type="text" formControlName="last_name" placeholder="Last name" />
                        </mat-form-field>
                    </div>
                    <div class="col-12">
                          <!-- input -->
                          <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                          >Email</mat-label
                        >
                        <mat-form-field
                          appearance="outline"
                          class="w-100"
                          color="primary"
                        >
                          <input
                            matInput
                            type="email"
                            formControlName="email"
                            placeholder="Email address"
                            readonly
                          />
                        </mat-form-field>
                      <!-- input -->
                      <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                        >Phone</mat-label
                      >
                      <mat-form-field
                        appearance="outline"
                        class="w-100"
                        color="primary"
                      >
                        <input matInput type="text" placeholder="+1 (123) 456-7890" type="tel" 
                        formControlName="phone" />

                      </mat-form-field>
                      <div *ngIf="profileForm.get('phone')?.touched && profileForm.get('phone')?.errors">
                        <p class="text-danger f-s-12 m-t-0" *ngIf="profileForm.get('phone')?.errors?.['pattern']">Please enter a valid phone number (e.g., +1 (123) 456-7890)</p> 
                      </div>
                    </div>
                  </form>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card-content>
    </mat-tab>
    <mat-tab *ngIf="role === '2'">
        <ng-template mat-tab-label>
          <div class="d-flex align-items-center">
            <mat-icon class="d-flex align-items-center">
              <i-tabler name="user-circle" class="icon-20 m-r-8 d-flex"></i-tabler>
            </mat-icon>
          </div>
          Medical
        </ng-template>
        <mat-card-content class="p-y-24">
          <div class="row">
            <div class="col-12">
              <mat-card class="cardWithShadow">
                <mat-card-content>
                  <mat-card-title>Medical Details</mat-card-title>
                  <mat-card-subtitle class="f-s-14"
                    > To update your medical details, make your changes and click save.
                  </mat-card-subtitle
                  >

                <form [formGroup]="medicalForm" class="row m-t-24">
                  <div class="col-12">
                     <!-- input -->
                     <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                     >Medical Conditions</mat-label
                   >
                   <mat-form-field
                     appearance="outline"
                     class="w-100"
                     color="primary"
                   >
                     <input matInput placeholder="Medical Conditions" type="text" formControlName="medical_conditions" />
                   </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                    >Emergency Contact</mat-label
                    >
                  </div>
                  <div class="col-sm-6" formGroupName="emergency_contact">
                    <!-- input -->
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="text" placeholder="Name" formControlName="name" />
                    </mat-form-field>
                  </div>
                  <div class="col-sm-6" formGroupName="emergency_contact">
                    <!-- input -->
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="text" placeholder="Relationship" formControlName="relationship" />
                    </mat-form-field>
                  </div>
                  <div class="col-12" formGroupName="emergency_contact">
                    <!-- input -->
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="text" placeholder="Phone Number" formControlName="phone" />
                    </mat-form-field>
                    <div *ngIf="medicalForm.get('emergency_contact.phone')?.touched && medicalForm.get('emergency_contact.phone')?.errors">
                      <p class="text-danger f-s-12 m-t-0" *ngIf="medicalForm.get('emergency_contact.phone')?.errors?.['pattern']">Please enter a valid phone number (e.g., +1 (123) 456-7890)</p> 
                    </div>
                  </div>
                  <div class="col-12">
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                    >Insurance Data</mat-label
                    >
                  </div>
                  <div class="col-sm-6" formGroupName="insurance_data">
                    <!-- input -->
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="text" placeholder="Insurance Provider" formControlName="provider" />
                    </mat-form-field>
                  </div>
                  <div class="col-sm-6" formGroupName="insurance_data">
                    <!-- input -->
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="text" placeholder="Policy Number" formControlName="policy_number" />
                    </mat-form-field>
                  </div>
                  <div class="col-12" formGroupName="insurance_data">
                    <mat-form-field appearance="outline" class="w-100" color="primary">
                      <textarea
                        matInput
                        placeholder="Coverage Details"
                        formControlName="coverage_details"
                        rows="4"
                      ></textarea>
                    </mat-form-field>
                  </div>
                  <div class="col-12" formGroupName="insurance_data">
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block">Insurance Start Date</mat-label>
                    <mat-form-field appearance="outline" class="w-100" color="primary">
                      <input
                        matInput
                        [matDatepicker]="startPicker"
                        placeholder="Select a date"
                        formControlName="createdAt"
                        name="insuranceStartDate"
                      />
                      <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
                      <mat-datepicker #startPicker></mat-datepicker>
                    </mat-form-field>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card-content>
    </mat-tab>
    <mat-tab *ngIf="role === '2'">
      <ng-template mat-tab-label>
        <div class="d-flex align-items-center">
          <mat-icon class="d-flex align-items-center">
            <i-tabler name="user-circle" class="icon-20 m-r-8 d-flex"></i-tabler>
          </mat-icon>
        </div>
        Social Media
      </ng-template>
      <mat-card-content class="p-y-24">
        <div class="row">
          <div class="col-12">
            <mat-card class="cardWithShadow">
              <mat-card-content>
                <form [formGroup]="socialMediaForm" class="row m-t-24">
                  <div class="col-12" formGroupName="social_media">
                     <!-- input -->
                     <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                     >Facebook Profile</mat-label
                   >
                   <mat-form-field
                     appearance="outline"
                     class="w-100"
                     color="primary"
                   >
                     <input matInput placeholder="https://www.facebook.com/username/" type="text" formControlName="facebook" />
                   </mat-form-field>
                  </div>
                  <div class="col-12" formGroupName="social_media">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                    >Instagram Profile</mat-label
                  >
                  <mat-form-field
                    appearance="outline"
                    class="w-100"
                    color="primary"
                  >
                    <input matInput placeholder="https://www.instagram.com/username/" type="text" formControlName="instagram" />
                  </mat-form-field>
                 </div>
                 <div class="col-12" formGroupName="social_media">
                  <!-- input -->
                  <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                  >X Profile</mat-label
                >
                <mat-form-field
                  appearance="outline"
                  class="w-100"
                  color="primary"
                >
                  <input matInput placeholder="https://www.x.com/username/" type="text" formControlName="twitter" />
                </mat-form-field>
               </div>
               <div class="col-12" formGroupName="social_media">
                <!-- input -->
                <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                >LinkedIn Profile</mat-label
              >
              <mat-form-field
                appearance="outline"
                class="w-100"
                color="primary"
              >
                <input matInput placeholder="https://www.linkedin.com/username/" type="text" formControlName="linkedin" />
              </mat-form-field>
             </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card-content>
    </mat-tab>
    <mat-tab *ngIf="role === '3'">
      <ng-template mat-tab-label>
        <div class="d-flex align-items-center">
          <mat-icon class="d-flex align-items-center">
            <i-tabler name="briefcase" class="icon-20 m-r-8 d-flex"></i-tabler>
          </mat-icon>
        </div>
        Company
      </ng-template>
      <mat-card-content class="p-y-24">
        <div class="row justify-content-center">
          <!--
          <div class="col-sm-4">
            <mat-card class="cardWithShadow">
              <mat-card-content class="p-y-24">
                <mat-card-title>Change Logo</mat-card-title>
                <mat-card-subtitle class="f-s-14"
                  >Change your company Logo from here</mat-card-subtitle
                >
                <div class="text-center m-t-24 logo-upload">
                    <img
                      [src]="logo"
                      class="rounded-circle"
                      width="120"
                      height="120"
                    />
                    <div class="m-t-24">
                      <button mat-flat-button color="primary" class="m-r-8 file">
                        Upload new logo
                        <input
                          type="file"
                          name="logo"
                          (change)="onFileSelected($event)"
                          accept="image/jpeg"
                          style="
                            position: absolute;
                            display: block;
                            width: 100%;
                            opacity: 0;
                            top: 0;
                            left: 0;
                            cursor: pointer;"
                        />
                      </button>
                      <button mat-stroked-button color="warn">Reset</button>
                    </div>
                    <span class="f-s-14 m-t-24 d-block"
                      >Allowed JPG. Max size of 1MB</span
                    >
                  </div>
              </mat-card-content>
            </mat-card>
          </div>
          -->
          <div class="col-sm-8">
            <mat-card class="cardWithShadow">
              <mat-card-content class="p-y-24">
                <mat-card-title class="m-b-24"
                  >Company Information</mat-card-title
                >

                  <form class="row" [formGroup]="profileForm">
                    <div class="col-sm-12">
                      <!-- input -->
                      <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                        >Company Name*</mat-label
                      >
                      <mat-form-field
                        appearance="outline"
                        class="w-100"
                        color="primary"
                      >
                        <input matInput type="text" value="Visitor Analytics" formControlName="companyName" />
                      </mat-form-field>
                      <!-- input -->
                      <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                        >Headquarter</mat-label
                      >
                      <mat-form-field
                        appearance="outline"
                        class="w-100"
                        color="primary"
                      >
                        <input matInput type="text" formControlName="headquarter" />
                      </mat-form-field>
                      <!-- input -->
                      <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                        >Team Members amount</mat-label
                      >
                      <mat-form-field
                        appearance="outline"
                        class="w-100"
                        color="primary"
                      >
                        <input matInput type="number" formControlName="employees_amount" />
                      </mat-form-field>
                      <!-- input -->
                      <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                        >Business Segment</mat-label
                      >
                      <mat-form-field
                        appearance="outline"
                        class="w-100"
                        color="primary"
                      >
                        <input
                          matInput
                          type="text"
                          formControlName="bussiness_segment"
                        />
                      </mat-form-field>
                    </div>
                  </form>
                </mat-card-content>
              </mat-card>
            </div>
          </div>
        </mat-card-content>
    </mat-tab>
    </mat-tab-group>
    <div class="text-right p-24 p-t-0">
      <button mat-flat-button class="m-r-8" (click)="saveProfile()" [disabled]="isSubmitting">Save</button>
      <button mat-flat-button class="bg-error text-white">Cancel</button>
    </div>
</mat-card>
