<mat-card class="cardWithShadow">
  <mat-tab-group
    [(selectedIndex)]="selectedTabIndex"
    mat-stretch-tabs="false"
    animationDuration="0ms"
    (selectedTabChange)="onTabChange($event)"
  >
    <mat-tab label="Account">
      <ng-template mat-tab-label>
        <div class="d-flex align-items-center">
          <mat-icon class="d-flex align-items-center">
            <i-tabler
              name="user-circle"
              class="icon-20 m-r-8 d-flex"
            ></i-tabler>
          </mat-icon>
        </div>
        Account
      </ng-template>
      <mat-card-content class="p-y-24">
        <div class="row">
          <div class="col-sm-6" *ngIf="role === '3'">
            <div class="col-12">
              <mat-card class="cardWithShadow">
                <mat-card-content class="p-y-24">
                  <mat-card-title
                    >Current Plan:
                    <span class="text-success">{{ currentPlan?.name }}</span>
                  </mat-card-title>
                  <mat-card-subtitle
                    class="f-s-14"
                    *ngIf="currentPlan?.id !== 1"
                    >Thanks for being a premium member and supporting
                    Inimble.</mat-card-subtitle
                  >

                  <div class="m-t-24">
                    <button
                      mat-flat-button
                      color="primary"
                      *ngIf="currentPlan?.id === 1"
                    >
                      <span> Go Premium </span>
                      <i-tabler
                        name="diamond"
                        class="icon-20 f-w-600 f-s-5 m-l-8"
                      ></i-tabler>
                    </button>
                    <button
                      mat-stroked-button
                      class="m-l-8"
                      color="warn"
                      *ngIf="currentPlan?.id !== 1"
                    >
                      Reset Plan
                    </button>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
            <div class="col-12">
              <mat-card class="cardWithShadow">
                <mat-card-content class="p-y-24">
                  <mat-card-title>My Sentinel</mat-card-title>
                  <mat-card-subtitle class="f-s-14">
                    AI content monitoring that tracks trending topics, analyzes
                    posts automatically, and generates actionable suggestions
                    for content opportunities.
                  </mat-card-subtitle>

                  <div class="m-t-24">
                    <button
                      *ngIf="
                        !sentinelSubscription ||
                        sentinelSubscription.status === 'inactive' ||
                        sentinelSubscription.status === 'incomplete' ||
                        sentinelSubscription.status === 'past_due' ||
                        sentinelSubscription.status === 'canceled'
                      "
                      mat-flat-button
                      color="primary"
                      (click)="enableSentinel()"
                      [disabled]="isLoadingSubscription"
                    >
                      <span *ngIf="!isLoadingSubscription">Enable</span>
                      <span *ngIf="isLoadingSubscription">Processing...</span>
                    </button>

                    <button
                      *ngIf="
                        sentinelSubscription?.status === 'active' &&
                        !sentinelSubscription?.cancel_at_period_end
                      "
                      mat-stroked-button
                      class="m-l-8"
                      color="warn"
                      (click)="disableSentinel()"
                      [disabled]="isLoadingSubscription"
                    >
                      <span *ngIf="!isLoadingSubscription">Disable</span>
                      <span *ngIf="isLoadingSubscription">Processing...</span>
                    </button>

                    <button
                      *ngIf="
                        sentinelSubscription?.status === 'active' &&
                        sentinelSubscription?.cancel_at_period_end
                      "
                      mat-stroked-button
                      class="m-l-8"
                      color="primary"
                      disabled
                    >
                      Canceled (Ends
                      {{
                        sentinelSubscription?.current_period_end
                          | date : "mediumDate"
                      }})
                    </button>
                  </div>

                  <div
                    *ngIf="sentinelSubscription?.status === 'active'"
                    class="m-t-24"
                  >
                    <mat-card>
                      <mat-card-content class="p-0 p-t-16">
                        <mat-card-title>Payment Invoice</mat-card-title>

                        <div *ngIf="isLoadingReceipt" class="text-center p-16">
                          <p class="m-t-8">Loading invoice...</p>
                        </div>

                        <div
                          *ngIf="subscriptionReceipt && !isLoadingReceipt"
                          class="invoice-info"
                        >
                          <div class="m-t-16">
                            <button
                              mat-stroked-button
                              color="primary"
                              class="m-r-8 m-b-8"
                              (click)="viewReceipt()"
                            >
                              <mat-icon>visibility</mat-icon>
                              View Receipt
                            </button>
                          </div>
                        </div>

                        <div
                          *ngIf="!subscriptionReceipt && !isLoadingReceipt"
                          class="text-center p-16"
                        >
                          <p class="text-muted">No receipt available</p>
                        </div>
                      </mat-card-content>
                    </mat-card>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
          </div>
          <div class="col-sm-6" *ngIf="role === '3'">
            <mat-card class="cardWithShadow">
              <mat-card-content class="p-y-24">
                <mat-card-title>Change Password</mat-card-title>
                <mat-card-subtitle class="f-s-14"
                  >To change your password please confirm
                  here</mat-card-subtitle
                >
                <form class="m-t-24" [formGroup]="profileForm">
                  <!-- input -->
                  <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                    >Current Password</mat-label
                  >
                  <mat-form-field
                    appearance="outline"
                    class="w-100"
                    color="primary"
                  >
                    <input
                      matInput
                      type="password"
                      placeholder="Current password"
                      formControlName="old_password"
                    />
                  </mat-form-field>
                  <!-- input -->
                  <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                    >New Password</mat-label
                  >
                  <mat-form-field
                    appearance="outline"
                    class="w-100"
                    color="primary"
                  >
                    <input
                      matInput
                      type="password"
                      placeholder="New password"
                      formControlName="new_password"
                    />
                  </mat-form-field>
                  <!-- input -->
                  <!-- <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Confirm Password</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 hide-hint"
                      color="primary"
                    >
                      <input matInput type="password" value="password" />
                    </mat-form-field> -->
                </form>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-sm-4">
            <mat-card class="cardWithShadow">
              <mat-card-content class="p-y-24">
                <mat-card-title>Change Profile</mat-card-title>
                <mat-card-subtitle class="f-s-14"
                  >Change your profile picture from here</mat-card-subtitle
                >
                <div class="text-center m-t-24 logo-upload">
                  <img
                    [src]="picture"
                    class="rounded-circle"
                    width="120"
                    height="120"
                    style="object-fit: cover; aspect-ratio: 1 / 1"
                  />
                  <div class="m-t-24">
                    <button mat-flat-button color="primary" class="m-r-8 file">
                      Upload
                      <input
                        #fileInput
                        type="file"
                        name="logo"
                        (change)="onFileSelected($event)"
                        accept="image/jpeg, image/jpg, image/png"
                        style="
                          position: absolute;
                          display: block;
                          width: 100%;
                          opacity: 0;
                          top: 0;
                          left: 0;
                          cursor: pointer;
                        "
                      />
                    </button>
                    <button
                      mat-stroked-button
                      color="warn"
                      (click)="deleteImage()"
                    >
                      Reset
                    </button>
                  </div>
                  <span class="f-s-14 m-t-24 d-block"
                    >Allowed JPG, PNG. Max size of 1MB</span
                  >
                </div>
              </mat-card-content>
            </mat-card>
          </div>
          <div [class]="role === '3' ? 'col-sm-8' : 'col-sm-8'">
            <mat-card class="cardWithShadow">
              <mat-card-content>
                <mat-card-title>Personal Details</mat-card-title>
                <mat-card-subtitle class="f-s-14"
                  >To change your personal details, edit and save from here
                </mat-card-subtitle>

                <form
                  [formGroup]="personalForm"
                  class="row m-t-24"
                  *ngIf="role !== '3'"
                >
                  <div class="col-12 col-sm-6">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Name</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="text" formControlName="name" />
                      <mat-error
                        *ngIf="
                          personalForm.get('name')?.touched &&
                          personalForm.get('name')?.errors
                        "
                      >
                        <span
                          class="f-s-12 m-t-0"
                          *ngIf="personalForm.get('name')?.errors?.['required']"
                          >Name is required</span
                        >
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-12 col-sm-6">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Last name</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input matInput type="text" formControlName="last_name" />
                      <mat-error
                        *ngIf="
                          personalForm.get('last_name')?.touched &&
                          personalForm.get('last_name')?.errors
                        "
                      >
                        <span
                          class="f-s-12 m-t-0"
                          *ngIf="personalForm.get('last_name')?.errors?.['required']"
                          >Last name is required</span
                        >
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Email</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="email"
                        formControlName="email"
                        readonly
                      />
                    </mat-form-field>
                    <!-- input -->

                    <ng-container *ngIf="!isOrphan">
                      <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                        >Phone</mat-label
                      >
                      <mat-form-field
                        appearance="outline"
                        class="w-100"
                        color="primary"
                      >
                        <input
                          matInput
                          type="tel"
                          placeholder="11234567890"
                          formControlName="phone"
                          (keypress)="restrictPhoneInput($event)"
                        />
                        <mat-error
                          *ngIf="
                            personalForm.get('phone')?.touched &&
                            personalForm.get('phone')?.errors
                          "
                        >
                          <span
                            class="f-s-12 m-t-0"
                            *ngIf="personalForm.get('phone')?.errors?.['required']"
                            >Phone number is required</span
                          >
                          <span
                            class="f-s-12 m-t-0"
                            *ngIf="personalForm.get('phone')?.errors?.['pattern'] ||
                                   personalForm.get('phone')?.errors?.['maxlength'] ||
                                   personalForm.get('phone')?.errors?.['minlength']"
                          >
                            Invalid format (e.g., 11234567890)</span
                          >
                        </mat-error>
                      </mat-form-field>
                    </ng-container>
                  </div>
                  <div class="col-12" *ngIf="!isOrphan">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Address</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="text"
                        placeholder="Address"
                        formControlName="address"
                      />
                      <mat-error
                        *ngIf="
                          personalForm.get('address')?.touched &&
                          personalForm.get('address')?.errors
                        "
                      >
                        <span
                          class="f-s-12 m-t-0"
                          *ngIf="personalForm.get('address')?.errors?.['required']"
                          >Address is required</span
                        >
                      </mat-error>
                    </mat-form-field>
                  </div>
                </form>

                <form
                  class="row m-t-24"
                  [formGroup]="profileForm"
                  *ngIf="role === '3'"
                >
                  <div class="col-12 col-sm-6">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Name</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="text"
                        formControlName="name"
                        placeholder="First name"
                        required
                      />
                      <mat-error
                        *ngIf="profileForm.get('name')?.hasError('required')"
                      >
                        This field is required
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-12 col-sm-6">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Last name</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="text"
                        formControlName="last_name"
                        placeholder="Last name"
                        required
                      />
                      <mat-error
                        *ngIf="
                          profileForm.get('last_name')?.hasError('required')
                        "
                      >
                        This field is required
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Email</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="email"
                        formControlName="email"
                        placeholder="Email address"
                        readonly
                      />
                    </mat-form-field>
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Phone</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="tel"
                        placeholder="11234567890"
                        formControlName="phone"
                        (keypress)="restrictPhoneInput($event)"
                      />
                      <mat-error
                        *ngIf="profileForm.get('phone')?.errors?.['pattern'] ||
                               profileForm.get('phone')?.errors?.['maxlength'] ||
                               profileForm.get('phone')?.errors?.['minlength']"
                      >
                        Invalid format (e.g., 11234567890)
                      </mat-error>
                    </mat-form-field>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-12">
            <mat-card class="cardWithShadow" *ngIf="role === '2' && isOrphan">
              <mat-card-content class="p-y-24">
                <mat-card-title>Application details</mat-card-title>
                <mat-card-subtitle class="f-s-14">
                  Tell us more about yourself
                </mat-card-subtitle>
                <!-- Application Details Form -->
                <form
                  [formGroup]="applicationForm"
                  (ngSubmit)="submitApplicationDetails()"
                >
                  <div class="row">
                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Location *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <mat-select
                          formControlName="location"
                          placeholder="Select your location"
                        >
                          <mat-option
                            *ngFor="let loc of locations"
                            [value]="loc.id"
                          >
                            {{ loc.city }}, {{ loc.country }}
                          </mat-option>
                        </mat-select>
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('location')
                              ?.hasError('required')
                          "
                        >
                          Location is required
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Role *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <mat-select
                          formControlName="role"
                          placeholder="Select role"
                        >
                          <mat-option
                            *ngFor="let role of careerRoles"
                            [value]="role"
                          >
                            {{ role.title }}
                          </mat-option>
                        </mat-select>
                        <mat-error
                          *ngIf="
                            applicationForm.get('role')?.hasError('required')
                          "
                        >
                          Role is required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >How did you hear about us? *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <input
                          matInput
                          formControlName="appliedWhere"
                          placeholder="e.g., LinkedIn, Indeed, Referral, etc."
                        />
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('appliedWhere')
                              ?.hasError('required')
                          "
                        >
                          This field is required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Were you referred? *</mat-label
                      >
                      <mat-radio-group
                        formControlName="referred"
                        class="d-flex gap-16"
                      >
                        <mat-radio-button value="yes" color="primary"
                          >Yes</mat-radio-button
                        >
                        <mat-radio-button value="no" color="primary"
                          >No</mat-radio-button
                        >
                      </mat-radio-group>
                    </div>

                    <div
                      class="col-md-12 m-b-16"
                      *ngIf="applicationForm.get('referred')?.value === 'yes'"
                    >
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Referred Name
                        <span class="text-danger">*</span></mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <input
                          matInput
                          formControlName="referredName"
                          placeholder="Name of referrer"
                        />
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('referredName')
                              ?.hasError('required')
                          "
                        >
                          Referrer name is required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Age *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <input
                          matInput
                          type="number"
                          formControlName="age"
                          placeholder="Age"
                        />
                        <mat-error
                          *ngIf="
                            applicationForm.get('age')?.hasError('required')
                          "
                        >
                          Age is required
                        </mat-error>
                        <mat-error
                          *ngIf="applicationForm.get('age')?.hasError('min')"
                        >
                          Must be at least 18
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Contact Phone *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <input
                          matInput
                          formControlName="contactPhone"
                          placeholder="11234567890"
                        />
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('contactPhone')
                              ?.hasError('required')
                          "
                        >
                          Phone is required
                        </mat-error>
                        <mat-error
                          *ngIf="
                            applicationForm.get('contactPhone')?.errors?.['pattern'] ||
                            applicationForm.get('contactPhone')?.errors?.['maxlength'] ||
                            applicationForm.get('contactPhone')?.errors?.['minlength']
                          "
                        >
                          Invalid format (e.g., 11234567890)
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block">
                        Additional Phone
                      </mat-label>
                      <mat-form-field appearance="outline" class="w-100">
                        <input
                          matInput
                          formControlName="additionalPhone"
                          placeholder="11234567890"
                        />
                        <mat-error
                          *ngIf="
                            applicationForm.get('additionalPhone')?.errors?.['pattern'] ||
                            applicationForm.get('additionalPhone')?.errors?.['maxlength'] ||
                            applicationForm.get('additionalPhone')?.errors?.['minlength']
                          "
                        >
                          Invalid format (e.g., 11234567890)
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Current Residence *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <input
                          matInput
                          formControlName="currentResidence"
                          placeholder="City, Country"
                        />
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('currentResidence')
                              ?.hasError('required')
                          "
                        >
                          Residence is required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-12 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Address *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <textarea
                          matInput
                          formControlName="address"
                          rows="2"
                          placeholder="Full Address"
                        ></textarea>
                        <mat-error
                          *ngIf="
                            applicationForm.get('address')?.hasError('required')
                          "
                        >
                          Address is required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Number of Children *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <input
                          matInput
                          type="number"
                          formControlName="children"
                          placeholder="0"
                          min="0"
                        />
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('children')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                        <mat-error
                          *ngIf="
                            applicationForm.get('children')?.hasError('min')
                          "
                        >
                          Must be 0 or greater
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >English Level *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <mat-select
                          formControlName="englishLevel"
                          placeholder="Select level"
                        >
                          <mat-option
                            *ngFor="let level of englishLevels"
                            [value]="level"
                          >
                            {{ level }}
                          </mat-option>
                        </mat-select>
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('englishLevel')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-12 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Competencies *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <textarea
                          matInput
                          formControlName="competencies"
                          rows="3"
                          placeholder="List your key competencies"
                        ></textarea>
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('competencies')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div
                      class="col-md-12 m-b-16"
                      *ngIf="
                        applicationForm.get('role')?.value?.position_id === 41
                      "
                    >
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Programming Languages *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <textarea
                          matInput
                          formControlName="programmingLanguages"
                          rows="3"
                          placeholder="List your programming languages"
                        ></textarea>
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('programmingLanguages')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-12 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Technical Skills *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <textarea
                          matInput
                          formControlName="technicalSkills"
                          rows="3"
                          placeholder="List your technical skills"
                        ></textarea>
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('technicalSkills')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Tech Proficiency (1-10) *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <input
                          matInput
                          type="number"
                          formControlName="techProficiency"
                          min="1"
                          max="10"
                        />
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('techProficiency')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('techProficiency')
                              ?.hasError('min') ||
                            applicationForm
                              .get('techProficiency')
                              ?.hasError('max')
                          "
                        >
                          Must be between 1 and 10
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Are you available to work Pacific Time hours
                        (11:30am-8:00pm, Mon-Fri)?</mat-label
                      >
                      <mat-radio-group
                        formControlName="availability"
                        class="d-flex gap-16"
                      >
                        <mat-radio-button value="yes" color="primary"
                          >Yes</mat-radio-button
                        >
                        <mat-radio-button value="no" color="primary"
                          >No</mat-radio-button
                        >
                      </mat-radio-group>
                      <mat-error
                        *ngIf="
                          applicationForm.get('availability')?.value === 'no'
                        "
                        class="f-s-12"
                      >
                        You must be available to work Pacific Time hours to
                        apply.</mat-error
                      >
                    </div>

                    <div class="col-md-6 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >What are your monthly salary expectations? (USD)
                        *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <input
                          matInput
                          type="number"
                          formControlName="salaryRange"
                          placeholder="Expected salary"
                        />
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('salaryRange')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-12 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Education History *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <textarea
                          matInput
                          formControlName="educationHistory"
                          rows="3"
                          placeholder="Describe your education history"
                        ></textarea>
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('educationHistory')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-12 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Work Experience *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <textarea
                          matInput
                          formControlName="workExperience"
                          rows="3"
                          placeholder="Describe your work experience"
                        ></textarea>
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('workExperience')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-12 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Work References *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <textarea
                          matInput
                          formControlName="workReferences"
                          rows="3"
                          placeholder="List work references"
                        ></textarea>
                        <mat-error
                          *ngIf="
                            applicationForm
                              .get('workReferences')
                              ?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-12 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Hobbies *</mat-label
                      >
                      <mat-form-field appearance="outline" class="w-100">
                        <textarea
                          matInput
                          formControlName="hobbies"
                          rows="2"
                          placeholder="Your hobbies"
                        ></textarea>
                        <mat-error
                          *ngIf="
                            applicationForm.get('hobbies')?.hasError('required')
                          "
                        >
                          Required
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-md-12 m-b-16">
                      <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block"
                        >Resume</mat-label
                      >
                      <div class="d-flex align-items-center">
                        <button
                          type="button"
                          mat-stroked-button
                          color="primary"
                          (click)="resumeInput.click()"
                        >
                          Upload Resume
                        </button>
                        <input
                          #resumeInput
                          type="file"
                          hidden
                          (change)="onResumeSelected($event)"
                          accept=".pdf,.doc,.docx"
                        />
                        <span class="m-l-16" *ngIf="resumeFileName">{{
                          resumeFileName
                        }}</span>
                      </div>
                      <mat-error *ngIf="!resumeFileName" class="f-s-12"
                        >Required</mat-error
                      >
                    </div>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-12">
            <mat-card class="cardWithShadow" *ngIf="role === '2' && isOrphan">
              <mat-card-content class="p-y-24">
                <mat-card-title>Introduction Video (English)</mat-card-title>
                <mat-card-subtitle class="f-s-14">
                  Upload your introduction video in English
                </mat-card-subtitle>
                <div class="m-t-16">
                  <p class="f-s-14 text-muted">
                    Please answer the following questions as detailed as
                    possible and submit an audio or video of yourself
                    <strong><u>(IN ENGLISH, BE SPONTANEOUS)</u></strong
                    >. The audio or video must be at least 1 minute long and
                    should not exceed 3 minutes.
                  </p>
                  <ol class="f-s-14 text-muted m-l-16 m-t-8">
                    <li>Who are you? (Name, age, profession)</li>
                    <li>
                      What are your three top priorities in your life and why?
                    </li>
                    <li>What do you admire about yourself? and why?</li>
                    <li>
                      Would you hire a person like yourself to join your team?
                      why?
                    </li>
                  </ol>
                </div>
                <div class="text-center m-t-24 logo-upload">
                  <!-- Video preview -->
                  <video
                    *ngIf="videoPreview"
                    [src]="videoPreview"
                    controls
                    width="300"
                    height="200"
                    class="m-b-16"
                    style="border-radius: 8px; background: #f5f5f5"
                  ></video>

                  <div *ngIf="!videoPreview" class="video-placeholder m-b-16">
                    <mat-icon class="icon-40 text-muted">videocam</mat-icon>
                    <p class="f-s-14 text-muted m-t-8">No video uploaded</p>
                  </div>

                  <div class="m-t-24">
                    <button
                      mat-flat-button
                      color="primary"
                      class="m-r-8 file video-upload-btn"
                    >
                      Upload Video
                      <input
                        #videoInput
                        type="file"
                        name="introductionVideo"
                        (change)="onVideoSelected($event)"
                        accept="video/*"
                        style="
                          position: absolute;
                          display: block;
                          width: 100%;
                          opacity: 0;
                          top: 0;
                          left: 0;
                          cursor: pointer;
                        "
                      />
                    </button>
                    <!--                     <button mat-stroked-button color="warn" (click)="deleteVideo()" [disabled]="!videoPreview">Delete</button> -->
                  </div>

                  <div class="m-t-16">
                    <mat-progress-bar
                      *ngIf="videoUploadProgress > 0"
                      mode="determinate"
                      [value]="videoUploadProgress"
                      class="m-b-8"
                    >
                    </mat-progress-bar>
                    <span
                      class="f-s-12 text-muted"
                      *ngIf="videoUploadProgress > 0"
                    >
                      Uploading: {{ videoUploadProgress }}%
                    </span>
                  </div>

                  <span class="f-s-14 m-t-24 d-block text-muted">
                    Allowed video formats: MP4, MOV, AVI. Max size of 100MB
                  </span>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card-content>
    </mat-tab>
    <mat-tab label="Olympia" *ngIf="role === '2' && isOrphan">
      <ng-template mat-tab-label>
        <div class="d-flex align-items-center">
          <mat-icon class="d-flex align-items-center">
            <i-tabler
              name="user-circle"
              class="icon-20 m-r-8 d-flex"
            ></i-tabler>
          </mat-icon>
        </div>
        Olympia
      </ng-template>
      <mat-card-content class="p-y-24">
        <div class="row">
          <div class="col-12">
            <mat-card class="cardWithShadow">
              <mat-card-content>
                <mat-card-title class="text-center m-b-10"
                  >Olympia - Inimble</mat-card-title
                >
                <mat-card-subtitle *ngIf="!submitted" class="f-s-14">
                  <ul>
                    <li>
                      Answer to each statement with the option that best
                      represents your opinion or behavior in the workplace.
                    </li>
                    <li>
                      Keep in mind that there are no right or wrong answers;
                      your honesty is essential to obtain accurate results and
                      determine your compatibility with the position you are
                      applying for.
                    </li>
                  </ul>
                  <p>
                    Once you have completed the Olympia test, you must wait for
                    our Human Resources team to review it. If you obtain a
                    positive result, we will contact you via WhatsApp to
                    schedule a first interview. If you are not contacted, it
                    means that you did not pass the test and the selection
                    process will not continue.
                  </p>
                  <br />
                  <p class="m-b-24">Inimble Work Smart </p>
                </mat-card-subtitle>
                <form
                  *ngIf="!submitted"
                  [formGroup]="olympiaForm"
                  class="row m-t-24"
                >
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Full name:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <input
                        matInput
                        formControlName="full_name"
                        required
                        type="text"
                        placeholder="Full Name"
                      />
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Birth Date:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <input
                        matInput
                        formControlName="birth_date"
                        required
                        type="date"
                        placeholder="Birth Date"
                      />
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >In which state and country do you currently
                      reside?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <input
                        matInput
                        formControlName="location_state_country"
                        required
                        type="text"
                        placeholder="State, Country"
                      />
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Which area are you applying for?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="application_area" required>
                        <mat-option value="Virtual Assistant"
                          >Virtual Assistant</mat-option
                        >
                        <mat-option value="Technology">Technology</mat-option>
                        <mat-option value="Sales">Sales</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >When faced with a challenge, I like to take the
                      initiative to find solutions immediately and do not wait
                      for instructions from others:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="take_initiative" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I prefer to make decisions quickly to avoid delays in a
                      project. I do not like to wait:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="quick_decisions" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >In high-pressure situations, I feel comfortable taking
                      control of the group and I usually take the lead without
                      any problems:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select
                        formControlName="pressure_leadership"
                        required
                      >
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I don't hesitate to express my opinions, even if they
                      differ from those of others:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="express_opinions" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >When things don't go as planned, I prefer to make changes
                      quickly rather than stick to a plan:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="adapt_changes" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I constantly try to motivate and enthuse those around me
                      during teamwork:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="motivate_team" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I enjoy social interactions in the workplace and
                      constantly seek to connect with others. I consider myself
                      friendly:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select
                        formControlName="social_interactions"
                        required
                      >
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I consider myself a good communicator who can persuade
                      others with my ideas:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="good_communicator" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I feel energized when working on creative projects with a
                      collaborative team. I like working with lots of
                      people:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="team_projects" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >If a coworker needs help, I am one of the first to offer,
                      regardless of my own tasks:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="help_colleagues" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I value harmony in the workplace and seek to avoid
                      conflict whenever possible. I seek peace of
                      mind:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="workplace_harmony" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I prefer a predictable and structured work environment
                      where I can plan my activities at a steady
                      pace:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select
                        formControlName="structured_environment"
                        required
                      >
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I enjoy teamwork and make an effort to listen to and
                      consider the opinions of others. I am more of a follower
                      than a leader:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="team_listener" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I feel comfortable supporting the team during times of
                      change to facilitate a smooth, step-by-step
                      transition:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select
                        formControlName="support_transitions"
                        required
                      >
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I feel more comfortable with long-term strategies that
                      involve careful planning and slow but steady
                      growth:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select
                        formControlName="long_term_strategies"
                        required
                      >
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I am careful with details and make sure that all tasks
                      are done correctly. I tend to be a
                      perfectionist:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="detail_oriented" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I prefer to follow established procedures to minimize
                      errors and ensure quality. I strictly adhere to
                      established standards:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="follow_procedures" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I like to plan ahead and follow a clear method to
                      complete my tasks. I don't like to improvise:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="plan_ahead" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I enjoy working in roles that require precision and a
                      meticulous approach to work, based on proven
                      methodologies:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="precision_work" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >I like to receive and give feedback to ensure that the
                      team meets quality standards:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="give_feedback" required>
                        <mat-option value="Never">Never</mat-option>
                        <mat-option value="Sometimes">Sometimes</mat-option>
                        <mat-option value="Frequently">Frequently</mat-option>
                        <mat-option value="Always">Always</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >As a child, did you always do what you were told
                      immediately, without complaining?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select
                        formControlName="childhood_obedience"
                        required
                      >
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Do you sometimes get moody?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="gets_grumpy" required>
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Do you often laugh at dirty jokes?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="laughs_dirty_jokes" required>
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Are you completely free of prejudice of any
                      kind?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="prejudice_free" required>
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Do you brag a little sometimes?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="brags_sometimes" required>
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Do you always reply to emails and messages
                      immediately?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select
                        formControlName="immediate_responses"
                        required
                      >
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Do you sometimes put off until tomorrow what you should
                      do today?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="procrastinates" required>
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Have you ever told a lie in your life?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select formControlName="ever_lied" required>
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12">
                    <mat-label class="fs-12 f-w-600 m-b-5"
                      >Is it easier for you to accept victory than defeat in a
                      game?:</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100 m-b-16"
                      color="primary"
                    >
                      <mat-select
                        formControlName="accept_win_over_loss"
                        required
                      >
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-12 text-right m-t-24">
                    <button
                      mat-flat-button
                      color="primary"
                      (click)="submitOlympiaForm()"
                      [disabled]="isSubmitting"
                    >
                      Submit
                    </button>
                  </div>
                </form>
                <ng-container *ngIf="submitted && !matchRequested">
                  <div
                    class="d-flex flex-column align-items-center justify-content-center p-24"
                  >
                    <h2 class="text-center m-b-16">
                      Thank you for submitting your Olympia assessment!
                    </h2>
                    <p class="text-center">
                      Please complete the steps to continue with you
                      application.
                    </p>
                    <button
                      mat-flat-button
                      color="primary"
                      class="m-t-16"
                      [routerLink]="['/dashboards/tm']"
                    >
                      Go
                    </button>
                  </div>
                </ng-container>
                <ng-container *ngIf="matchRequested">
                  <div
                    class="d-flex flex-column align-items-center justify-content-center p-24"
                  >
                    <h2 class="text-center m-b-16">
                      Thank you for completing the steps!
                    </h2>
                    <p class="text-center">
                      We will contact you soon in case you are selected.
                    </p>
                  </div>
                </ng-container>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card-content>
    </mat-tab>
    <mat-tab label="Social Media" *ngIf="role === '2'">
      <ng-template mat-tab-label>
        <div class="d-flex align-items-center">
          <mat-icon class="d-flex align-items-center">
            <i-tabler
              name="user-circle"
              class="icon-20 m-r-8 d-flex"
            ></i-tabler>
          </mat-icon>
        </div>
        Social Media
      </ng-template>
      <mat-card-content class="p-y-24">
        <div class="row">
          <div class="col-12">
            <mat-card class="cardWithShadow">
              <mat-card-content>
                <form [formGroup]="socialMediaForm" class="row m-t-24">
                  <div class="col-12" formGroupName="social_media">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Facebook Profile</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        placeholder="https://www.facebook.com/username/"
                        type="text"
                        formControlName="facebook"
                      />
                    </mat-form-field>
                  </div>
                  <div class="col-12" formGroupName="social_media">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Instagram Profile</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        placeholder="https://www.instagram.com/username/"
                        type="text"
                        formControlName="instagram"
                      />
                    </mat-form-field>
                  </div>
                  <div class="col-12" formGroupName="social_media">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >X Profile</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        placeholder="https://www.x.com/username/"
                        type="text"
                        formControlName="twitter"
                      />
                    </mat-form-field>
                  </div>
                  <div class="col-12" formGroupName="social_media">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >LinkedIn Profile</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        placeholder="https://www.linkedin.com/username/"
                        type="text"
                        formControlName="linkedin"
                      />
                    </mat-form-field>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card-content>
    </mat-tab>
    <mat-tab label="Company" *ngIf="role === '3'">
      <ng-template mat-tab-label>
        <div class="d-flex align-items-center">
          <mat-icon class="d-flex align-items-center">
            <i-tabler name="briefcase" class="icon-20 m-r-8 d-flex"></i-tabler>
          </mat-icon>
        </div>
        Company
      </ng-template>
      <mat-card-content class="p-y-24">
        <div class="row justify-content-center">
          <!--
          <div class="col-sm-4">
            <mat-card class="cardWithShadow">
              <mat-card-content class="p-y-24">
                <mat-card-title>Change Logo</mat-card-title>
                <mat-card-subtitle class="f-s-14"
                  >Change your company Logo from here</mat-card-subtitle
                >
                <div class="text-center m-t-24 logo-upload">
                    <img
                      [src]="logo"
                      class="rounded-circle"
                      width="120"
                      height="120"
                    />
                    <div class="m-t-24">
                      <button mat-flat-button color="primary" class="m-r-8 file">
                        Upload new logo
                        <input
                          type="file"
                          name="logo"
                          (change)="onFileSelected($event)"
                          accept="image/jpeg"
                          style="
                            position: absolute;
                            display: block;
                            width: 100%;
                            opacity: 0;
                            top: 0;
                            left: 0;
                            cursor: pointer;"
                        />
                      </button>
                      <button mat-stroked-button color="warn">Reset</button>
                    </div>
                    <span class="f-s-14 m-t-24 d-block"
                      >Allowed JPG. Max size of 1MB</span
                    >
                  </div>
              </mat-card-content>
            </mat-card>
          </div>
          -->
          <div class="col-sm-8">
            <mat-card class="cardWithShadow">
              <mat-card-content class="p-y-24">
                <mat-card-title class="m-b-24"
                  >Company Information</mat-card-title
                >

                <form class="row" [formGroup]="profileForm">
                  <div class="col-sm-12">
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Company Name*</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="text"
                        value="Visitor Analytics"
                        formControlName="companyName"
                      />
                    </mat-form-field>
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Headquarter</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="text"
                        formControlName="headquarter"
                      />
                    </mat-form-field>
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Team Members amount</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="number"
                        formControlName="employees_amount"
                      />
                    </mat-form-field>
                    <!-- input -->
                    <mat-label class="f-s-14 f-w-600 m-b-8 d-block"
                      >Business Segment</mat-label
                    >
                    <mat-form-field
                      appearance="outline"
                      class="w-100"
                      color="primary"
                    >
                      <input
                        matInput
                        type="text"
                        formControlName="bussiness_segment"
                      />
                    </mat-form-field>
                    <mat-slide-toggle
                      formControlName="show_info"
                      color="primary"
                    >
                      Show company information in the Expert Match section
                    </mat-slide-toggle>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-card-content>
    </mat-tab>
    <mat-tab label="Certifications" *ngIf="role === '2'">
      <ng-template mat-tab-label>
        <div class="d-flex align-items-center">
          <mat-icon class="d-flex align-items-center">
            <i-tabler
              name="certificate"
              class="icon-20 m-r-8 d-flex"
            ></i-tabler>
          </mat-icon>
        </div>
        Certifications
      </ng-template>
      <mat-card-content class="p-y-24">
        <div *ngIf="isLoadingCertifications">
          <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </div>

        <div
          *ngIf="!isLoadingCertifications && certifications.length === 0"
          class="text-center p-20"
        >
          <p>No certifications found.</p>
        </div>

        <div *ngIf="!isLoadingCertifications && certifications.length > 0">
          <mat-card
            class="cardWithShadow m-b-20"
            *ngFor="let cert of certifications"
          >
            <mat-card-content class="p-20">
              <div class="d-flex align-items-start">
                <div class="m-r-16">
                  <div
                    class="bg-light-primary rounded d-flex align-items-center justify-content-center"
                    style="width: 48px; height: 48px"
                  >
                    <i-tabler
                      name="certificate"
                      class="icon-24 text-primary"
                    ></i-tabler>
                  </div>
                </div>
                <div class="flex-grow-1">
                  <h4 class="m-0 f-w-600">{{ cert.name }}</h4>
                  <div class="f-s-14 m-t-4">
                    {{ cert.issuer }}
                    <span class="text-muted m-l-4">
                      Issued {{ cert.date | date : "MMM yyyy" }}
                      <span *ngIf="cert.expiration_date">
                         Expires {{ cert.expiration_date | date : "MMM yyyy" }}
                      </span>
                    </span>
                  </div>

                  <div class="m-t-8" *ngIf="cert.url">
                    <a
                      [href]="cert.url"
                      target="_blank"
                      mat-stroked-button
                      color="primary"
                      class="custom-btn"
                    >
                      See credential
                      <i-tabler
                        name="external-link"
                        class="icon-16 m-l-4"
                      ></i-tabler>
                    </a>
                  </div>

                  <div
                    class="m-t-8 f-s-14"
                    *ngIf="cert.description"
                    style="white-space: pre-wrap"
                  >
                    {{ cert.description }}
                  </div>

                  <div class="m-t-12" *ngIf="cert.attachment_url">
                    <div *ngIf="isImage(cert.attachment_url)">
                      <img
                        [src]="cert.attachment_url"
                        class="rounded m-b-4"
                        style="
                          max-height: 150px;
                          max-width: 100%;
                          object-fit: contain;
                          border: 1px solid #eee;
                        "
                      />
                      <div class="f-s-12 text-muted">
                        {{ getFileName(cert.attachment_url) }}
                      </div>
                    </div>
                    <div
                      *ngIf="!isImage(cert.attachment_url)"
                      class="d-flex align-items-center p-8 bg-light rounded border"
                      style="width: fit-content; max-width: 100%"
                    >
                      <i-tabler
                        name="file-description"
                        class="icon-24 m-r-8 text-primary"
                      ></i-tabler>
                      <div class="m-r-16 overflow-hidden">
                        <div
                          class="f-s-14 f-w-500 text-truncate"
                          [matTooltip]="getFileName(cert.attachment_url)"
                        >
                          {{ getFileName(cert.attachment_url) }}
                        </div>
                      </div>
                      <a
                        [href]="cert.attachment_url"
                        target="_blank"
                        mat-icon-button
                        color="primary"
                        matTooltip="Open File"
                      >
                        <i-tabler
                          name="external-link"
                          class="icon-20"
                        ></i-tabler>
                      </a>
                    </div>
                  </div>
                </div>
                <div>
                  <button mat-icon-button [matMenuTriggerFor]="menu">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #menu="matMenu">
                    <button mat-menu-item (click)="editCertification(cert)">
                      <mat-icon>edit</mat-icon>
                      <span>Edit</span>
                    </button>
                    <button
                      mat-menu-item
                      (click)="deleteCertification(cert.id)"
                    >
                      <mat-icon>delete</mat-icon>
                      <span>Delete</span>
                    </button>
                  </mat-menu>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>

        <div class="d-flex justify-content-center">
          <button
            mat-raised-button
            color="primary"
            (click)="addCertification()"
          >
            <mat-icon>add</mat-icon>
            Add Certification
          </button>
        </div>
      </mat-card-content>
    </mat-tab>
  </mat-tab-group>
  <div class="text-right p-24 p-t-0">
    <ng-container
      *ngIf="
        !(role === '2' && isOrphan && selectedTabIndex === 1) &&
        !(selectedTabLabel === 'Certifications')
      "
    >
      <button
        mat-flat-button
        class="m-r-8"
        (click)="saveProfile()"
        [disabled]="!isSaveEnabled() || isSubmitting"
      >
        Save
      </button>
      <button mat-flat-button class="bg-error text-white">Cancel</button>
    </ng-container>
  </div>
</mat-card>
