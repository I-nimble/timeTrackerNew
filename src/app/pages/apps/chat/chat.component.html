<div class="communication-container">
  <!-- Título del chat -->
<div class="header-container" *ngIf="plan?.name === 'Basic'; else defaultCallButtons">
  <h1 class="chat-title">Communication</h1>
  <div class="call-buttons">
    <cometchat-call-buttons
      *ngIf="selectedUser"
      [user]="selectedUser"
      [callButtonsStyle]="callButtonsStyleBasic">
    </cometchat-call-buttons>
  </div>
</div>
<ng-template #defaultCallButtons>
  <div class="header-container">
    <h1 class="chat-title">Communication</h1>
    <div class="call-buttons">
      <cometchat-call-buttons
        *ngIf="selectedUser"
        [user]="selectedUser"
        [callButtonsStyle]="callButtonsStyle">
      </cometchat-call-buttons>
    </div>
  </div>
</ng-template>
  <div class="chat-layout">
    <!-- Sección de grupos -->
    <div class="group-chats">
      <h2>Group Chats</h2>
      <div class = "groups"><cometchat-groups [onItemClick]="handleGroupSelection"></cometchat-groups></div>

      <!-- Separador -->
      <div class="separator"></div>

      <div *ngIf="plan?.name !== 'Basic'" >
      <h2>Single Chats</h2>
      <cometchat-users [onItemClick]="handleUserSelection"></cometchat-users>
      </div>
    </div>

    <!-- Sección de mensajes -->
    <div class="messages">
      <!-- Cabecera del chat -->
      <ng-container *ngIf="plan?.name === 'Basic'; else defaultTemplate">
      <cometchat-message-header 
        [user]="selectedUser"
        [group]="selectedGroup">
      </cometchat-message-header>

      <cometchat-message-list
      *ngIf="selectedUser"
      [user]="selectedUser"
      [group]="selectedGroup"></cometchat-message-list>

      <!-- Composer para nuevos mensajes -->
      <cometchat-message-composer
        [user]="selectedUser"
        [group]="selectedGroup"
        [messageComposerStyle]="messageComposerStyle"
        attachmentIconURL="assets/images/attachment.png"
        [placeholderText]="'Write a message'"
        [hideVoiceRecording]="true">
      </cometchat-message-composer>
    </ng-container>
      <ng-template #defaultTemplate>
        <cometchat-message-header 
        [user]="selectedUser"
        [group]="selectedGroup">
      </cometchat-message-header>

      <cometchat-message-list
        *ngIf="selectedUser || selectedGroup"
        [user]="selectedUser"
        [group]="selectedGroup">
      </cometchat-message-list>

      <!-- Composer sin estilos ni hideVoiceRecording -->
      <cometchat-message-composer
        [user]="selectedUser"
        [group]="selectedGroup"
        [messageComposerStyle]="messageComposerStyle"
        attachmentIconURL="assets/images/attachment.png"
        [placeholderText]="'Write a message'">
      </cometchat-message-composer>
      </ng-template>
      <!-- <cometchat-conversations-with-messages></cometchat-conversations-with-messages> -->
    </div>
  </div>
</div>