<mat-card class="cardWithShadow">
<mat-accordion multi [formGroup]="form">

  <!-- V/TO -->
  <mat-expansion-panel expanded>
    <mat-expansion-panel-header>
      <mat-panel-title>V/TO</mat-panel-title>
    </mat-expansion-panel-header>

    <p>This panel can have general V/TO info if needed.</p>
  </mat-expansion-panel>

  <!-- Year -->
  <mat-expansion-panel expanded>
    <mat-expansion-panel-header>
      <mat-panel-title>Year</mat-panel-title>
    </mat-expansion-panel-header>

    <mat-form-field class="w-100" appearance="outline">
      <mat-label>Year</mat-label>
      <input matInput type="number" formControlName="year">
    </mat-form-field>
  </mat-expansion-panel>

<!-- Core Values -->
<mat-expansion-panel expanded>
  <mat-expansion-panel-header>
    <mat-panel-title>Core Values</mat-panel-title>
  </mat-expansion-panel-header>

<mat-card class="mat-mdc-card mdc-card cardWithShadow b-1 rounded p-30 m-b-24 bg-gray-100">
  <h4 ctitle class="m-b-24">Three-Year Picture</h4>

  <!-- Custom Dropzone -->
<div class="custom-dropzone dropzone-box mt-2" ngx-dropzone (change)="onFileSelected($event)">
  <input type="file" accept="image/*" hidden>
  <ngx-dropzone-label>
    <div class="dropzone-content d-flex align-items-center justify-content-center flex-col">
      <ng-container *ngIf="!selectedImage; else previewTpl">
        <img src="assets/images/products/Products-07.png"
             alt="Upload" width="80" class="upload-icon m-b-16">
        <p class="headline">Drop or select file</p>
        <p class="subtext f-s-14">
          Drop files here or click to
          <span class="browse-link text-primary">browse</span>
        </p>
      </ng-container>

      <ng-template #previewTpl>
        <img [src]="selectedImage"
             class="preview-img">
      </ng-template>
    </div>
  </ngx-dropzone-label>
</div>



  <div class="f-s-14 f-w-600 m-b-8 d-block m-t-15">Files:</div>
</mat-card>


  <!-- Editable Core Values items -->
  <div formArrayName="coreValues">
    <div *ngFor="let item of coreValues.controls; let i = index" [formGroupName]="i" class="m-b-16">
      <mat-expansion-panel expanded>
        <mat-expansion-panel-header>
          <mat-panel-title>{{ item.get('title')?.value || 'Core Value ' + (i+1) }}</mat-panel-title>
        </mat-expansion-panel-header>

        <mat-form-field class="w-100" appearance="outline">
          <mat-label>{{ item.get('title')?.value || 'Value' }}</mat-label>
          <input matInput formControlName="value" placeholder="Enter details">
        </mat-form-field>
      </mat-expansion-panel>
    </div>

    <button mat-raised-button color="primary" (click)="addRow('coreValues')">
      + Add Core Value
    </button>
  </div>
</mat-expansion-panel>


  <!-- Core Focus -->
  <mat-expansion-panel expanded>
    <mat-expansion-panel-header>
      <mat-panel-title>Core Focus</mat-panel-title>
    </mat-expansion-panel-header>

    <div formArrayName="coreFocus">
      <div *ngFor="let item of coreFocus.controls; let i = index" [formGroupName]="i" class="m-b-16">
        <mat-expansion-panel expanded>
          <mat-expansion-panel-header>
            <mat-panel-title>Core Focus Item {{ i + 1 }}</mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Item</mat-label>
            <input matInput formControlName="value" placeholder="Enter details">
          </mat-form-field>
        </mat-expansion-panel>
      </div>

      <button mat-raised-button color="primary" (click)="addRow('coreFocus')">
        + Add Core Focus Item
      </button>
    </div>
  </mat-expansion-panel>

  <!-- Marketing Strategy -->
  <mat-expansion-panel expanded>
    <mat-expansion-panel-header>
      <mat-panel-title>Marketing Strategy</mat-panel-title>
    </mat-expansion-panel-header>

    <div formArrayName="marketingStrategy">
      <div *ngFor="let item of marketingStrategy.controls; let i = index" [formGroupName]="i" class="m-b-16">
        <mat-expansion-panel expanded>
          <mat-expansion-panel-header>
            <mat-panel-title>Strategy {{ i + 1 }}</mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Strategy</mat-label>
            <input matInput formControlName="value" placeholder="Enter details">
          </mat-form-field>
        </mat-expansion-panel>
      </div>

      <button mat-raised-button color="primary" (click)="addRow('marketingStrategy')">
        + Add Strategy
      </button>
    </div>
  </mat-expansion-panel>

</mat-accordion>
</mat-card>