<mat-card class="cardWithShadow">
    <mat-card-header>
      <mat-card-title>Team Member Details</mat-card-title>
      <mat-card-subtitle>{{ user.name + ' ' + user.last_name }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="row">
        <div class="col-lg-6">
          <mat-card class="cardWithShadow">
            <mat-card-header>
              <mat-card-title>Weekly Hours</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <apx-chart
                [series]="weeklyHoursChart.series"
                [dataLabels]="weeklyHoursChart.dataLabels"
                [chart]="weeklyHoursChart.chart"
                [legend]="weeklyHoursChart.legend"
                [colors]="weeklyHoursChart.colors"
                [stroke]="weeklyHoursChart.stroke"
                [tooltip]="weeklyHoursChart.tooltip"
                [grid]="weeklyHoursChart.grid"
                [plotOptions]="weeklyHoursChart.plotOptions"
                [responsive]="weeklyHoursChart.responsive"
                [xaxis]="weeklyHoursChart.xaxis" 
                [yaxis]="weeklyHoursChart.yaxis"
              ></apx-chart>
            </mat-card-content>
          </mat-card>
        </div>
  
        <div class="col-lg-6">
          <mat-card class="cardWithShadow">
            <mat-card-header>
              <mat-card-title>Daily Hours</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <apx-chart
                [series]="dailyHoursChart.series"
                [chart]="dailyHoursChart.chart"
                [labels]="dailyHoursChart.labels"
                [colors]="dailyHoursChart.colors"
              ></apx-chart>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  
<mat-card class="cardWithShadow">
    <mat-card-header>
      <mat-card-title>Worked Hours</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <!-- Date Range selection -->
      <div class="row m-b-4 m-t-16">
        <div class="col-md-6 col-12">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Date Range</mat-label>
            <mat-date-range-input [rangePicker]="picker">
              <input
                matStartDate
                placeholder="Start date"
                [(ngModel)]="startDate"
                (dateChange)="onDateRangeChange()"
              />
              <input
                matEndDate
                placeholder="End date"
                [(ngModel)]="endDate"
                (dateChange)="onDateRangeChange()"
              />
            </mat-date-range-input>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
          </mat-form-field>
        </div>
      </div>

      <!-- Entries table -->
      <div class="table-responsive" *ngIf="!isEntriesLoading && weekEntries.length > 0">
        <table mat-table [dataSource]="weekEntries" class="w-100">
          <!-- Day Column -->
          <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef>Day / Date</th>
            <td mat-cell *matCellDef="let entry">
              <div class="d-flex flex-column">
                <span class="text-muted small">{{ getDayName(entry.date) }}</span>
                <span class="fw-bold">{{ formatDate(entry.date) }}</span>
              </div>
            </td>
          </ng-container>

          <!-- Start Time Column -->
          <ng-container matColumnDef="start_time">
            <th mat-header-cell *matHeaderCellDef>Clock-in</th>
            <td mat-cell *matCellDef="let entry">
              <div class="d-flex align-items-center gap-2">
                <span>{{ formatTime(entry.start_time) }}</span>
              </div>
            </td>
          </ng-container>

          <!-- End Time Column -->
          <ng-container matColumnDef="end_time">
            <th mat-header-cell *matHeaderCellDef>Clock-out</th>
            <td mat-cell *matCellDef="let entry">
              <div class="d-flex align-items-center gap-2">
                <span>{{ formatTime(entry.end_time) }}</span>
              </div>
            </td>
          </ng-container>

          <!-- Total Hours Column -->
          <ng-container matColumnDef="total_hours">
            <th mat-header-cell *matHeaderCellDef>Total Hours</th>
            <td mat-cell *matCellDef="let entry">
              <div class="d-flex align-items-center justify-content-between">
                <span class="badge bg-secondary rounded-pill p-x-12 p-y-4">
                  {{ entry.total_hours }} hrs
                </span>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>

      <!-- Empty state -->
      <div *ngIf="!isEntriesLoading && weekEntries.length === 0" class="text-center py-5">
        <mat-icon class="text-muted" style="font-size: 48px; height: 48px; width: 48px;">schedule</mat-icon>
        <h5 class="mt-3">No entries found for this date range</h5>
      </div>

      <!-- Loading state -->
      <div *ngIf="isEntriesLoading" class="text-center py-5">
        <mat-spinner diameter="40" class="mx-auto"></mat-spinner>
        <p class="mt-3">Loading entries...</p>
      </div>

      <!-- Date range summary -->
      <div *ngIf="weekEntries.length > 0" class="mt-4 pt-3 border-top">
        <div class="row">
          <div class="col-12 text-end">
            <p class="mb-0 text-muted">Total hours:</p>
            <h4 class="fw-bold text-primary">
              {{ getTotalWeekHours() | number:'1.2-2' }} hrs
            </h4>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>