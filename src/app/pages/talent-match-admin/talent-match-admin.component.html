<div class="row">
  <div class="col-12">
    <mat-card
      class="mat-card-top cardWithShadow position-relative overflow-hidden p-16"
    >
      <!-- output view -->
      <h4 Ctitle>
        Talent match
        <span class="f-s-14 f-w-400 d-block"
          >select one or more candidate to schedule an interview</span
        >
      </h4>

      <div output>
        <div class="d-flex align-items-center gap-2 m-b-16 m-t-16">
          <mat-form-field
            appearance="outline"
            class="flex-grow-1 hide-hint m-b-0"
          >
            <input matInput type="text" placeholder="Search Candidate" />
            <mat-icon matSuffix>
              <i-tabler name="search" class="icon-20 d-flex m-t-2"></i-tabler>
            </mat-icon>
          </mat-form-field>
          <button
            mat-flat-button
            class="m-r-8"
            (click)="openAddCandidateDialog()"
          >
            New candidate
          </button>
        </div>
        <div class="table-responsive">
          <table mat-table [dataSource]="dataSource" class="w-100">
            <!-- Checkbox Column -->
            <!-- <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox
                  (change)="$event ? masterToggle() : null"
                  [checked]="selection.hasValue() && isAllSelected()"
                  color="primary"
                  [indeterminate]="selection.hasValue() && !isAllSelected()"
                  [aria-label]="checkboxLabel()"
                >
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox
                  (click)="$event.stopPropagation()"
                  (change)="$event ? selection.toggle(row) : null"
                  color="primary"
                  [checked]="selection.isSelected(row)"
                  [aria-label]="checkboxLabel(row)"
                >
                </mat-checkbox>
              </td>
            </ng-container> -->

            <!-- Name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef class="f-w-600 f-s-14">
                Name
              </th>
              <td mat-cell *matCellDef="let element">
                <div class="d-flex align-items-center">
                  <img
                    style="width: 50px; height: 50px; border-radius: 50%"
                    [src]="
                      element.profile_pic_url && element.profile_pic_url !== ''
                        ? picturesUrl + '/' + element.profile_pic_url
                        : assetsPath
                    "
                    alt="Profile picture"
                    (error)="handleImageError($event)"
                  />
                  <div class="m-l-16">
                    <h6 class="f-s-14 f-w-600">
                      {{ element.name }}
                    </h6>
                    <span class="f-s-14 f-s-12">
                      {{ element.position }}
                    </span>
                  </div>
                </div>
              </td>
            </ng-container>

            <!-- Skills Column -->
            <ng-container matColumnDef="skills">
              <th mat-header-cell *matHeaderCellDef>Skills</th>
              <td mat-cell *matCellDef="let element">
                {{ element.skills || "N/A" }}
              </td>
            </ng-container>

            <!-- Status Column -->
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Status</th>
              <td mat-cell *matCellDef="let element">
                <span
                  [ngClass]="getStatus(element).color"
                  class="rounded f-w-600 p-6 p-y-4 f-s-12"
                >
                  {{ getStatus(element).label }}
                </span>
              </td>
            </ng-container>

            <!-- Email Column -->
            <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef>Email</th>
              <td mat-cell *matCellDef="let element">{{ element.email }}</td>
            </ng-container>

            <!-- company Column -->
            <ng-container matColumnDef="company">
              <th mat-header-cell *matHeaderCellDef>Company</th>
              <td mat-cell *matCellDef="let element">
                {{ getCompanyName(element.company_id) }}
              </td>
            </ng-container>

            <!-- Edit Column -->
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let element">
                <button mat-icon-button [matMenuTriggerFor]="actionsMenu">
                  <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #actionsMenu="matMenu">
                  <button mat-menu-item (click)="openCandidateResume(element.resume_url)">
                    <mat-icon>visibility</mat-icon>
                      <span>View</span>
                    </button>
                  <button mat-menu-item (click)="openEditCandidateDialog(element)">
                    <mat-icon>edit</mat-icon>
                    <span>Edit</span>
                  </button>
                  <button mat-menu-item (click)="deleteCandidate(element.id)">
                    <mat-icon>delete</mat-icon>
                    <span>Delete</span>
                  </button>
                </mat-menu>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: displayedColumns"
              (click)="selection.toggle(row)"
            ></tr>
          </table>
        </div>
      </div>
    </mat-card>
  </div>
</div>
