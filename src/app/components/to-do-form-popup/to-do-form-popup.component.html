<div class="modal-container">
  <div class="modal-header d-flex justify-content-between align-items-center">
    <h1 class="modal-title">{{ data.formHeader.mode }} {{ data.formHeader.title }}</h1>
    <button mat-button class="close-button" (click)="closePopup()">
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="data.managementForm.get(data.options[0].formGroup)">
      <div *ngFor="let form of data.options[0].form">
        <input
          *ngIf="form.type === 'text'"
          id="{{ form.control }}"
          type="text"
          formControlName="{{ form.control }}"
          class="form-control"
          [placeholder]="form.label"
        />
        <textarea
          *ngIf="form.type === 'textarea'"
          id="{{ form.control }}"
          formControlName="{{ form.control }}"
          class="form-control"
          [placeholder]="form.label"
        ></textarea>
      </div>
      <!-- Add recurrent checkbox field -->
      <mat-checkbox id="recurrent" formControlName="recurrent" class="mb-2">
        Repeat task
      </mat-checkbox>
      <!-- Add due_date field -->
      <div *ngIf="data.managementForm.get(data.options[0].formGroup).get('due_date')?.enabled">
        <input
          id="due_date"
          type="datetime-local"
          formControlName="due_date"
          class="form-control"
        />
      </div>
      <!-- Add priority field -->
      <div>
        <select
          id="priority"
          formControlName="priority"
          class="form-control"
        >
          <option *ngFor="let priority of priorities" [value]="priority.id" [selected]="data.selectedForm?.priority === priority.id">
            {{ priority.name }}
          </option>
        </select>
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button 
          *ngIf="data.selectedForm" 
          mat-raised-button 
          color="warn" 
          class="btn btn-danger" 
          (click)="deleteElement(data.options[0])">
          Delete
        </button>
        <button 
          mat-raised-button 
          color="primary" 
          class="btn btn-primary"
          (click)="submitForm(data.options[0])">
          Save
        </button>
      </div>
    </form>
  </div>
</div>