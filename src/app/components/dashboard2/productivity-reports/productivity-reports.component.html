<mat-card class="cardWithShadow h-100">
  <mat-card-header>
    <div class="filters-row row w-100">
      <div class="col-12 col-md-6">
        <div *ngIf="role == '1'">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Select a Company</mat-label>
            <mat-select
              [(value)]="selectedClient"
              (selectionChange)="onClientChange($event.value)"
            >
              <mat-option [value]="null" disabled>Select a client</mat-option>
              <mat-option
                *ngFor="let company of companiesList"
                [value]="company"
              >
                {{ company.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <mat-form-field class="w-100" appearance="outline">
          <mat-label>Select a Team Member</mat-label>
          <mat-select
            [(value)]="selectedUserId"
            (selectionChange)="onUserChange($event.value)"
            [disabled]="!selectedClient && role == '1'"
          >
            <mat-option [value]="null">All members</mat-option>
            <mat-option
              *ngFor="let user of dataSource"
              [value]="user.profile.id"
            >
              {{ user.profile.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-12 col-md-6">
        <mat-form-field class="w-100" appearance="outline">
          <mat-label>Date Range</mat-label>
          <mat-date-range-input [rangePicker]="picker">
            <input
              matStartDate
              placeholder="Start date"
              [(ngModel)]="startDate"
              (dateChange)="onDateRangeChange()"
            />
            <input
              matEndDate
              placeholder="End date"
              [(ngModel)]="endDate"
              (dateChange)="onDateRangeChange()"
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </div>
    </div>
  </mat-card-header>
  <mat-card-content class="p-t-0">
    <div class="table-responsive">
      <app-employee-table [displayedColumns]="customColumns" [dataSource]="filteredDataSource"></app-employee-table>
      <div *ngIf="isLoading" class="text-center p-4">
        <mat-progress-spinner
          diameter="70"
          style="margin: 0 auto"
          mode="indeterminate"
        ></mat-progress-spinner>
      </div>
      <div
        *ngIf="!isLoading && dataSource?.length === 0"
        class="text-center p-4 f-s-16 text-muted"
      >
        No completed tasks yet.
      </div>
    </div>
  </mat-card-content>
</mat-card>
